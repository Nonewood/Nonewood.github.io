<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="9HGY4GvHBQiYcf3ysSZmtQCkRadM6n5ZDPoYRlcr71E">














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="朝简单处想 往认真处行">
<meta property="og:url" content="http://nonewood.github.io/index.html">
<meta property="og:site_name" content="朝简单处想 往认真处行">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="朝简单处想 往认真处行">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://nonewood.github.io/">





<script data-ad-client="ca-pub-7093029654692281" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-7126877795421398",
          enable_page_level_ads: true
     });
</script>

  <title>朝简单处想 往认真处行</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">朝简单处想 往认真处行</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/16/tdx-to-python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/16/tdx-to-python/" itemprop="url">朋友说他有个致富公式… 让我给看看</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-01-16T10:35:26+08:00">
                2022-01-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  716 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="写在开头"><a href="#写在开头" class="headerlink" title="写在开头"></a>写在开头</h3><p>主要实现的东西是：<br>1）朋友给了个通达信公式，想看能不能致富；<br>2）手动去执行选股肉眼观察，效果还行；<br>3）有文化的我们知道只凭肉眼看肯定不靠谱，就想回测看看效果，就去测了；</p>
<p>涉及知识点：通达信的公式编辑，选股，以及bigquant上的回测</p>
<h3 id="通达信看效果貌似还行"><a href="#通达信看效果貌似还行" class="headerlink" title="通达信看效果貌似还行"></a>通达信看效果貌似还行</h3><p>选股公式是这样子的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DIFF:=EMA(CLOSE,12) - EMA(CLOSE,26);</span><br><span class="line">DEA:= EMA(DIFF,9);</span><br><span class="line">MACD:= 2*(DIFF-DEA);</span><br><span class="line">REF(C&lt;=O,2) AND REF(H&lt;REF(H,1) AND L&lt;REF(L,1),1) AND L&gt;REF(L,1) AND C&gt;O AND C&gt;REF(H,2) AND REF(EVERY(C/REF(C,1)&lt;1,3),3) AND DIFF&gt;0 AND DEA&gt;0;</span><br></pre></td></tr></table></figure>

<p>打开通达信，Ctrl + F , 条件选股， 新建公式<br>把这个公式粘贴进去， 测试公式， 保存<br>[图片见文末参考链接]</p>
<p>Ctrl  T,  选择刚建好的公式，执行选股，多试几个日期，发现，哎呦不错；<br>[图片见文末参考链接]</p>
<h3 id="那么回测试试呢？"><a href="#那么回测试试呢？" class="headerlink" title="那么回测试试呢？"></a>那么回测试试呢？</h3><p>首先需要将通达信公式语言转化成 python 语言；<br>回测平台选的是 bigquant, 因为我自己相对比较熟；<br>翻译的过程中要是有不懂的语句，网上查下（文末附链接）；<br>然后核对的时候看选出的股票能不能对上，就能知道有没有转化正确；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 通达信公式</span><br><span class="line">DIFF:=EMA(CLOSE,12) - EMA(CLOSE,26);</span><br><span class="line">DEA:= EMA(DIFF,9);</span><br><span class="line">MACD:= 2*(DIFF-DEA);</span><br><span class="line">REF(C&lt;=O,2) AND REF(H&lt;REF(H,1) AND L&lt;REF(L,1),1) AND L&gt;REF(L,1) AND C&gt;O AND C&gt;REF(H,2) AND REF(EVERY(C/REF(C,1)&lt;1,3),3) AND DIFF&gt;0 AND DEA&gt;0;</span><br><span class="line"></span><br><span class="line"># python</span><br><span class="line">x.close_2 &lt;= x.open_2 and (x.high_1 &lt; x.high_2 and x.low_1 &lt; x.low_2) and x.low_0 &gt; x.low_1 and x.close_0 &gt; x.open_0 and x.close_0 &gt; x.high_2 and x.close_5 &lt; x.close_6 and x.close_4 &lt; x.close_5 and x.close_3 &lt; x.close_4 and (x.dif &gt; 0 and x.dea &gt;0)</span><br></pre></td></tr></table></figure>

<p><strong>Bigquant 实现</strong><br>Bigquant最后实现的效果如下，下边挑重点的截图简单说一下<br>[图片见文末参考链接]</p>
<p>1）特征列表，需要把公式里涉及的特征都体现在特征列表里边<br>[图片见文末参考链接]<br>2）自定义python模块中生成一下信号<br>[图片见文末参考链接]<br>3）回测函数中定义好自己的回测逻辑就可以回测了</p>
<p><strong>回测结果</strong><br>[图片见文末参考链接]</p>
<h3 id="写在后边"><a href="#写在后边" class="headerlink" title="写在后边"></a>写在后边</h3><p>真正能拿到财富代码的公式肯定不会这么简单，这篇只是方法的记录文章罢了；<br>转化公式的时候发现貌似没有通达信公式-&gt; python语言的现成工具，感觉可以做一个；</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>通达信公式<br><a href="https://www.agudashi.cn/doc/5bffb706e7de95c78c41dd3c.html" target="_blank" rel="noopener">https://www.agudashi.cn/doc/5bffb706e7de95c78c41dd3c.html</a><br>公众号文章链接</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/15/xueqiu-performance-accum-rate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/15/xueqiu-performance-accum-rate/" itemprop="url">雪球模拟组合收益率爬取</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-01-15T10:33:56+08:00">
                2022-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  559 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="实现的功能："><a href="#实现的功能：" class="headerlink" title="实现的功能："></a>实现的功能：</h3><p>1）爬取雪球组合六个月以内，每天的累积收益率值（时间比六个月长就不给提供每天的累积收益率了）；<br>2）每天收盘后爬取当天的累积收益率；<br>3）延伸 1：把上边两点加起来就能一直跟踪组合的收益率了；<br>4）延伸 2：设置定时脚本，写程序定时执行上边的三个步骤，就可以每天只看一眼，时间变得简单一点点；</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests,json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取六个月内的每天累计收益率</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_return_rate_six_month</span><span class="params">(gid, cookie)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'authority'</span>: <span class="string">'tc.xueqiu.com'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua'</span>: <span class="string">'" Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"'</span>,</span><br><span class="line">        <span class="string">'accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua-mobile'</span>: <span class="string">'?0'</span>,</span><br><span class="line">        <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua-platform'</span>: <span class="string">'"Windows"'</span>,</span><br><span class="line">        <span class="string">'origin'</span>: <span class="string">'https://xueqiu.com'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-site'</span>: <span class="string">'same-site'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-mode'</span>: <span class="string">'cors'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-dest'</span>: <span class="string">'empty'</span>,</span><br><span class="line">        <span class="string">'referer'</span>: <span class="string">'https://xueqiu.com/performance'</span>,</span><br><span class="line">        <span class="string">'accept-language'</span>: <span class="string">'zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7'</span>,</span><br><span class="line">        <span class="string">'cookie'</span>: cookie,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    params = ( </span><br><span class="line">        (<span class="string">'gid'</span>, gid),  </span><br><span class="line">        (<span class="string">'period'</span>, <span class="string">'6m'</span>), <span class="comment"># 每次取最大就行, 时间再长不给返回每天的累计收益率...</span></span><br><span class="line">        (<span class="string">'market'</span>, <span class="string">'ALL'</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    response = requests.get(<span class="string">'https://tc.xueqiu.com/tc/snowx/MONI/forchart/roa.json'</span>, headers=headers, params=params)</span><br><span class="line">    content = json.loads(response.text)</span><br><span class="line">    <span class="keyword">return</span> content[<span class="string">'result_data'</span>][<span class="string">'list'</span>]</span><br><span class="line"></span><br><span class="line">res= pd.DataFrame()</span><br><span class="line">gid = <span class="string">'your gid'</span></span><br><span class="line">cookie = <span class="string">'your cookies'</span></span><br><span class="line">data = get_return_rate(gid)</span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> data:</span><br><span class="line">    value_dict = dict()</span><br><span class="line">    value_dict[<span class="string">'return_rate'</span>] = element[<span class="string">'value'</span>]</span><br><span class="line">    value_dict[<span class="string">'date'</span>] = element[<span class="string">'date'</span>]  </span><br><span class="line">    res= ers.append(value_dict, ignore_index = <span class="literal">True</span>)</span><br><span class="line">res.head()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取每天的累积收益率</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_accum_rate_each_day</span><span class="params">(gid, cookie)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'authority'</span>: <span class="string">'tc.xueqiu.com'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua'</span>: <span class="string">'" Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"'</span>,</span><br><span class="line">        <span class="string">'accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua-mobile'</span>: <span class="string">'?0'</span>,</span><br><span class="line">        <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua-platform'</span>: <span class="string">'"Windows"'</span>,</span><br><span class="line">        <span class="string">'origin'</span>: <span class="string">'https://xueqiu.com'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-site'</span>: <span class="string">'same-site'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-mode'</span>: <span class="string">'cors'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-dest'</span>: <span class="string">'empty'</span>,</span><br><span class="line">        <span class="string">'referer'</span>: <span class="string">'https://xueqiu.com/performance'</span>,</span><br><span class="line">        <span class="string">'accept-language'</span>: <span class="string">'zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7'</span>,</span><br><span class="line">        <span class="string">'cookie'</span>: cookie,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    params = (</span><br><span class="line">        (<span class="string">'gid'</span>, gid),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    response = requests.get(<span class="string">'https://tc.xueqiu.com/tc/snowx//MONI/performances.json'</span>, headers=headers, params=params)</span><br><span class="line"></span><br><span class="line">    response.encoding = <span class="string">"utf-8"</span></span><br><span class="line">    content = json.loads(response.text)</span><br><span class="line">    <span class="keyword">if</span> content[<span class="string">'msg'</span>] == <span class="string">'请求超时，请检查网络并重试'</span>:</span><br><span class="line">        print(<span class="string">"请求错误...需要更新 cookies... "</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    accum_rate = content[<span class="string">'result_data'</span>][<span class="string">'performances'</span>][<span class="number">1</span>][<span class="string">'accum_rate'</span>]</span><br><span class="line">    <span class="keyword">return</span> accum_rate</span><br><span class="line"></span><br><span class="line">value = get_accum_rate_each_day(gid, cookie)</span><br></pre></td></tr></table></figure>

<h3 id="补充阅读"><a href="#补充阅读" class="headerlink" title="补充阅读"></a>补充阅读</h3><p>windows 定时脚本设置<br><a href="https://www.cnblogs.com/sui776265233/p/13602893.html" target="_blank" rel="noopener">https://www.cnblogs.com/sui776265233/p/13602893.html</a><br>linux 定时脚本设置<br><a href="https://www.jianshu.com/p/d93e2b177814" target="_blank" rel="noopener">https://www.jianshu.com/p/d93e2b177814</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/11/xueqiu-performancev1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/11/xueqiu-performancev1/" itemprop="url">雪球模拟组合查询和交易脚本-python</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-01-11T08:21:59+08:00">
                2022-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  422 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Talk-cheap-show-code"><a href="#Talk-cheap-show-code" class="headerlink" title="Talk cheap, show code"></a>Talk cheap, show code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用前需要替换 cookie 和 组合 id, 怎么找见下边截图/链接</span></span><br><span class="line">cookie = your_cookies</span><br><span class="line">group_id = yout_group_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 持仓查询函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hold_stock</span><span class="params">()</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        ‘authority’: ‘tc.xueqiu.com’,</span><br><span class="line">        ‘sec-ch-ua’: ‘” Not A;Brand”;v=“<span class="number">99</span>”, “Chromium”;v=“<span class="number">96</span>”, “Google Chrome”;v=“<span class="number">96</span>”’,</span><br><span class="line">        ‘accept’: ‘application/json, text/plain, */*’,</span><br><span class="line">    <span class="comment">#    ‘accept’: ‘application/json, charset=UTF-8’,</span></span><br><span class="line">        ‘sec-ch-ua-mobile’: ‘?0’,</span><br><span class="line">        ‘user-agent’: ‘Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">6.1</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">96.0</span><span class="number">.4664</span><span class="number">.45</span> Safari/<span class="number">537.36</span>’,</span><br><span class="line">        ‘sec-ch-ua-platform’: ‘”Windows”’,</span><br><span class="line">        ‘origin’: ‘https://xueqiu.com’,</span><br><span class="line">        ‘sec-fetch-site’: ‘same-site’,</span><br><span class="line">        ‘sec-fetch-mode’: ‘cors’,</span><br><span class="line">        ‘sec-fetch-dest’: ‘empty’,</span><br><span class="line">        ‘referer’: ‘https://xueqiu.com/performance’,</span><br><span class="line">        ‘accept-language’: ‘zh-CN,zh;q=<span class="number">0.9</span>,en;q=<span class="number">0.8</span>,zh-TW;q=<span class="number">0.7</span>’,</span><br><span class="line">        ‘cookie’: cookie,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    params = (</span><br><span class="line">        (‘gid’, group_id),</span><br><span class="line">    )</span><br><span class="line">    response = requests.get(‘https://tc.xueqiu.com/tc/snowx//MONI/performances.json’, headers=headers, params=params)</span><br><span class="line">    response.encoding = “utf<span class="number">-8</span>”</span><br><span class="line">    content = json.loads(response.text)</span><br><span class="line">    res_stock = content[‘result_data’][‘performances’][<span class="number">1</span>][‘list’]</span><br><span class="line">    res_asset = content[‘result_data’][‘performances’][<span class="number">1</span>][‘assets’]</span><br><span class="line">    <span class="keyword">return</span> res_asset, res_stock</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交易函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">trade</span><span class="params">(direction, date, comment, stock_code, price, shares, tax_rate)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        ‘authority’: ‘tc.xueqiu.com’,</span><br><span class="line">        ‘sec-ch-ua’: ‘” Not A;Brand”;v=“<span class="number">99</span>”, “Chromium”;v=“<span class="number">96</span>”, “Google Chrome”;v=“<span class="number">96</span>”’,</span><br><span class="line">        ‘accept’: ‘application/json, text/plain, */*’,</span><br><span class="line">        ‘content-type’: ‘application/x-www-form-urlencoded’,</span><br><span class="line">        ‘sec-ch-ua-mobile’: ‘?0’,</span><br><span class="line">        ‘user-agent’: ‘Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">6.1</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">96.0</span><span class="number">.4664</span><span class="number">.45</span> Safari/<span class="number">537.36</span>’,</span><br><span class="line">        ‘sec-ch-ua-platform’: ‘”Windows”’,</span><br><span class="line">        ‘origin’: ‘https://xueqiu.com’,</span><br><span class="line">        ‘sec-fetch-site’: ‘same-site’,</span><br><span class="line">        ‘sec-fetch-mode’: ‘cors’,</span><br><span class="line">        ‘sec-fetch-dest’: ‘empty’,</span><br><span class="line">        ‘referer’: ‘https://xueqiu.com/performance’,</span><br><span class="line">        ‘accept-language’: ‘zh-CN,zh;q=<span class="number">0.9</span>,en;q=<span class="number">0.8</span>,zh-TW;q=<span class="number">0.7</span>’,</span><br><span class="line">        ‘cookie’: cookie,</span><br><span class="line">    &#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">      ‘type’: direction, <span class="comment"># 1 是买 2 是卖</span></span><br><span class="line">      ‘date’: date,</span><br><span class="line">      ‘comment’: comment, <span class="comment"># 备注</span></span><br><span class="line">      ‘gid’: group_id,</span><br><span class="line">      ‘symbol’: stock_code,</span><br><span class="line">      ‘price’: price,</span><br><span class="line">      ‘shares’: shares,</span><br><span class="line">      ‘tax_rate’: tax_rate, <span class="comment"># 卖是千一, 买是 0</span></span><br><span class="line">      ‘commission_rate’: ‘<span class="number">0.1</span>’, <span class="comment"># 买卖都是万一</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.post(‘https://tc.xueqiu.com/tc/snowx/MONI/transaction/add.json’, headers=headers, data=data)</span><br></pre></td></tr></table></figure>

<h2 id="写在后边"><a href="#写在后边" class="headerlink" title="写在后边"></a>写在后边</h2><p>时间少，要做的事情有很多，希望能靠谱，做事，就不废话了…</p>
<h2 id="公众号链接（贴图）"><a href="#公众号链接（贴图）" class="headerlink" title="公众号链接（贴图）"></a>公众号链接（贴图）</h2><p><a href="https://mp.weixin.qq.com/s?__biz=MzI0NTY3MjY0OA==&mid=2247483943&idx=1&sn=f0095ba9f133f9805bfcffe3b97f61c9&chksm=e94bbd80de3c3496948fe638bc832f0ff359a281362b47c23e26320f46a47ea2e951459fe7ea&token=2018691164&lang=zh_CN#rd" target="_blank" rel="noopener">雪球模拟组合查询和交易脚本-python</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/12/15/xueqiu-performance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/15/xueqiu-performance/" itemprop="url">雪球模拟盘脚本化调仓</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-12-15T21:38:26+08:00">
                2021-12-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  540 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="为啥干这个？"><a href="#为啥干这个？" class="headerlink" title="为啥干这个？"></a>为啥干这个？</h3><p>工作和个人需要，基于雪球模拟组合实现自动化的股票调仓，主要分几步：<br>1）登录雪球，创建模拟组合，手动添加股票，获取填写的 cURL；<br>2) 转化为 python 的 post  请求；<br>3）运行程序，检查结果即可；</p>
<h3 id="咋干？"><a href="#咋干？" class="headerlink" title="咋干？"></a>咋干？</h3><p>1）创建组合<br>图见公众号链接，下同<br>2）手动添加股票<br>3）开发者工具，找到添加股票的请求<br>4）获取 cURL</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">curl 'https://tc.xueqiu.com/tc/snowx/MONI/transaction/add.json' \</span><br><span class="line">  -H 'authority: tc.xueqiu.com' \</span><br><span class="line">  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"' \</span><br><span class="line">  -H 'accept: application/json, text/plain, */*' \</span><br><span class="line">  -H 'content-type: application/x-www-form-urlencoded' \</span><br><span class="line">  -H 'sec-ch-ua-mobile: ?0' \</span><br><span class="line">  -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36' \</span><br><span class="line">  -H 'sec-ch-ua-platform: "macOS"' \</span><br><span class="line">  -H 'origin: https://xueqiu.com' \</span><br><span class="line">  -H 'sec-fetch-site: same-site' \</span><br><span class="line">  -H 'sec-fetch-mode: cors' \</span><br><span class="line">  -H 'sec-fetch-dest: empty' \</span><br><span class="line">  -H 'referer: https://xueqiu.com/performance' \</span><br><span class="line">  -H 'accept-language: zh-CN,zh;q=0.9,en;q=0.8,ja;q=0.7,zh-TW;q=0.6' \</span><br><span class="line">  -H 'cookie: your cookie here' \</span><br><span class="line">  --data-raw 'type=1&amp;date=2021-12-15&amp;gid=4383054580870984&amp;symbol=SZ002157&amp;price=9.49&amp;shares=100&amp;commission_rate=0.1' \</span><br><span class="line">  --compressed</span><br></pre></td></tr></table></figure>

<p>5）转化python的格式<br><a href="https://tool.lu/curl/" target="_blank" rel="noopener">https://tool.lu/curl/</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'authority'</span>: <span class="string">'tc.xueqiu.com'</span>,</span><br><span class="line">    <span class="string">'sec-ch-ua'</span>: <span class="string">'" Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"'</span>,</span><br><span class="line">    <span class="string">'accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">    <span class="string">'content-type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>,</span><br><span class="line">    <span class="string">'sec-ch-ua-mobile'</span>: <span class="string">'?0'</span>,</span><br><span class="line">    <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36'</span>,</span><br><span class="line">    <span class="string">'sec-ch-ua-platform'</span>: <span class="string">'"macOS"'</span>,</span><br><span class="line">    <span class="string">'origin'</span>: <span class="string">'https://xueqiu.com'</span>,</span><br><span class="line">    <span class="string">'sec-fetch-site'</span>: <span class="string">'same-site'</span>,</span><br><span class="line">    <span class="string">'sec-fetch-mode'</span>: <span class="string">'cors'</span>,</span><br><span class="line">    <span class="string">'sec-fetch-dest'</span>: <span class="string">'empty'</span>,</span><br><span class="line">    <span class="string">'referer'</span>: <span class="string">'https://xueqiu.com/performance'</span>,</span><br><span class="line">    <span class="string">'accept-language'</span>: <span class="string">'zh-CN,zh;q=0.9,en;q=0.8,ja;q=0.7,zh-TW;q=0.6'</span>,</span><br><span class="line">    <span class="string">'cookie'</span>: <span class="string">'your cookie here'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">  <span class="string">'type'</span>: <span class="string">'1'</span>, <span class="comment"># 1是买，2是卖</span></span><br><span class="line">  <span class="string">'date'</span>: <span class="string">'2021-12-15'</span>,</span><br><span class="line">  <span class="string">'gid'</span>: <span class="string">'4383054580870984'</span>,</span><br><span class="line">  <span class="string">'symbol'</span>: <span class="string">'SZ002714'</span>,</span><br><span class="line">  <span class="string">'price'</span>: <span class="string">'9.49'</span>,</span><br><span class="line">  <span class="string">'shares'</span>: <span class="string">'100'</span>,</span><br><span class="line">  <span class="string">'tax_rate'</span>: <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">'commission_rate'</span>: <span class="string">'0.1'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(<span class="string">'https://tc.xueqiu.com/tc/snowx/MONI/transaction/add.json'</span>, headers=headers, data=data)</span><br></pre></td></tr></table></figure>

<p>批量处理的时候，只需要脚本处理 data 的字典内容即可，太简单了，不展开说；</p>
<h3 id="注意的点"><a href="#注意的点" class="headerlink" title="注意的点"></a>注意的点</h3><p>1）cookies 一段时间可能失效，需要手动更新下；<br>2）基金，etf 都可以；</p>
<h3 id="吃水不忘挖井人"><a href="#吃水不忘挖井人" class="headerlink" title="吃水不忘挖井人"></a>吃水不忘挖井人</h3><p><a href="https://github.com/yyri/stockScripts" target="_blank" rel="noopener">https://github.com/yyri/stockScripts</a></p>
<h3 id="公众号链接"><a href="#公众号链接" class="headerlink" title="公众号链接"></a>公众号链接</h3><p><a href="https://mp.weixin.qq.com/s/rIYEBCV04xL1XMky57EtPA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/rIYEBCV04xL1XMky57EtPA</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/11/18/search-file-and-zip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/11/18/search-file-and-zip/" itemprop="url">shell 和 windows 查找文件并且压缩</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-11-18T23:11:51+08:00">
                2021-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  87 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>How to search files and zip（Linux or Windows）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./  -name '*.tar.zf' -exec zip filname.zip &#123;&#125; +</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">Get-ChildItem</span> -Path D:\test -Recurse -Include *.tar.gz| <span class="built_in">Compress-Archive</span> -Verbose -DestinationPath D:\test.zip -Force </span><br><span class="line"></span><br><span class="line"><span class="variable">$filepath</span>=<span class="string">"D:\test"</span> </span><br><span class="line"><span class="variable">$zippath</span>=<span class="string">"D:\test.zip"</span> </span><br><span class="line"><span class="built_in">Get-ChildItem</span> -Path <span class="variable">$filepath</span> -Recurse -Include *.tar.gz| <span class="built_in">Compress-Archive</span> -Verbose -DestinationPath <span class="variable">$zippath</span> -Force</span><br></pre></td></tr></table></figure>

<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p><a href="https://www.twblogs.net/a/5b7d44a32b71770a43de7828" target="_blank" rel="noopener">https://www.twblogs.net/a/5b7d44a32b71770a43de7828</a><br><a href="https://www.codegrepper.com/code-examples/shell/powershell+zip+multiple+files" target="_blank" rel="noopener">https://www.codegrepper.com/code-examples/shell/powershell+zip+multiple+files</a><br><a href="https://community.spiceworks.com/topic/2239060-search-for-files-and-zip" target="_blank" rel="noopener">https://community.spiceworks.com/topic/2239060-search-for-files-and-zip</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/11/07/513050-backtest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/11/07/513050-backtest/" itemprop="url">基于另类数据对ETF进行回测</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-11-07T17:38:10+08:00">
                2021-11-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.2k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基本背景"><a href="#基本背景" class="headerlink" title="基本背景"></a>基本背景</h2><p><a href="https://mp.weixin.qq.com/s/RFJM06EFiuBezAWLmfQMdg" target="_blank" rel="noopener">彭博盘前简报：7月14日</a></p>
<p>每天都会看这个公众号，而且会在盘前发，发现内容中提到的中概股和中概ETF的涨跌具有一定的相关性，早就手痒痒了想做一下回测看是否真得如此，于是，花了一整天时间… 有了这篇文章。</p>
<h2 id="爬取公众号文章"><a href="#爬取公众号文章" class="headerlink" title="爬取公众号文章"></a>爬取公众号文章</h2><p>爬取过程中三个麻烦的点：<br>1）可能会输入验证码；<br>2）爬取几次后，cookies会失效；<br>3）到最后即使手动查询想要查询的公众号，也会报错，返回了None（不知道是不是爬取次数过多的原因），不过弄到的数据已经够我用了（再早，这个公众号还没有中概股这个版块）；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,re</span><br><span class="line"> </span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver <span class="comment">#引入自动化登录模块</span></span><br><span class="line"><span class="keyword">import</span> time,datetime <span class="comment">#时间模块</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests <span class="comment">#抓取信息</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By <span class="comment">#引入定位寻找模块</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys <span class="comment">#引入键盘动作模块</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains <span class="comment">#引入鼠标行为模块</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 微信公众号账号</span></span><br><span class="line">user=<span class="string">""</span></span><br><span class="line"><span class="comment">#公众号密码</span></span><br><span class="line">password=<span class="string">""</span></span><br><span class="line"><span class="comment">#设置要爬取的公众号列表</span></span><br><span class="line">gzlist=[<span class="string">'彭博环球财经'</span>]</span><br><span class="line"><span class="comment">#保存的结果文件地址</span></span><br><span class="line">fileName=<span class="string">"articles.xls"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#登录微信公众号，获取登录之后的cookies信息，并保存到本地文本中</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">weChat_login</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment">#定义一个空的字典，存放cookies内容</span></span><br><span class="line">    post=&#123;&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#用webdriver启动谷歌浏览器</span></span><br><span class="line">    print(<span class="string">"启动浏览器，打开微信公众号登录界面"</span>)</span><br><span class="line">    <span class="comment">#CHROME_DRIVER=r"F:\\chromedriver.exe"</span></span><br><span class="line">    op = webdriver.ChromeOptions()</span><br><span class="line">    <span class="comment"># macos 使用的语句</span></span><br><span class="line">    driver = webdriver.Chrome(options=op)</span><br><span class="line">    <span class="comment">#driver = webdriver.Chrome(executable_path=CHROME_DRIVER)</span></span><br><span class="line">    <span class="comment">#driver.set_window_position(0,0)</span></span><br><span class="line">    <span class="comment">#driver.maximize_window()</span></span><br><span class="line">    <span class="comment">#打开微信公众号登录页面</span></span><br><span class="line">    driver.get(<span class="string">'https://mp.weixin.qq.com/'</span>)</span><br><span class="line">    <span class="comment">#等待5秒钟</span></span><br><span class="line">    time.sleep(<span class="number">10</span>)</span><br><span class="line">    print(<span class="string">"正在输入微信公众号登录账号和密码......"</span>)</span><br><span class="line">    driver.find_element_by_xpath(<span class="string">"./*//a[@class='login__type__container__select-type']"</span>).click() <span class="comment">#鼠标放到使用账号密码登录键上</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment">#清空账号框中的内容</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[1]/div[1]/div/span/input'</span>).clear()</span><br><span class="line">    <span class="comment">#自动填入登录用户名</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[1]/div[1]/div/span/input'</span>).send_keys(user)</span><br><span class="line">    <span class="comment">#清空密码框中的内容</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[1]/div[2]/div/span/input'</span>).clear()</span><br><span class="line">    <span class="comment">#自动填入登录密码</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[1]/div[2]/div/span/input'</span>).send_keys(password)</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    <span class="comment">#自动点击登录按钮进行登录</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[4]/a'</span>).click()</span><br><span class="line">    <span class="comment"># 拿手机扫二维码！</span></span><br><span class="line">    print(<span class="string">"请拿手机扫码二维码登录公众号"</span>)</span><br><span class="line">    time.sleep(<span class="number">20</span>)</span><br><span class="line">    print(<span class="string">"登录成功"</span>)</span><br><span class="line">    <span class="comment">#重新载入公众号登录页，登录之后会显示公众号后台首页，从这个返回内容中获取cookies信息</span></span><br><span class="line">    driver.get(<span class="string">'https://mp.weixin.qq.com/'</span>)</span><br><span class="line">    <span class="comment">#获取cookies</span></span><br><span class="line">    cookie_items = driver.get_cookies()</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#获取到的cookies是列表形式，将cookies转成json形式并存入本地名为cookie的文本中</span></span><br><span class="line">    <span class="keyword">for</span> cookie_item <span class="keyword">in</span> cookie_items:</span><br><span class="line">        post[cookie_item[<span class="string">'name'</span>]] = cookie_item[<span class="string">'value'</span>]</span><br><span class="line">    cookie_str = json.dumps(post)</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'cookie.txt'</span>, <span class="string">'w+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(cookie_str)</span><br><span class="line">    print(<span class="string">"cookies信息已保存到本地"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_content</span><span class="params">(query)</span>:</span></span><br><span class="line">    <span class="comment">#query为要爬取的公众号名称</span></span><br><span class="line">    <span class="comment">#公众号主页</span></span><br><span class="line">    url = <span class="string">'https://mp.weixin.qq.com/'</span></span><br><span class="line">    <span class="comment">#设置headers</span></span><br><span class="line">    header = &#123;</span><br><span class="line">        <span class="string">"HOST"</span>: <span class="string">"mp.weixin.qq.com"</span>,</span><br><span class="line">        <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0"</span></span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#读取上一步获取到的cookies</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'cookie.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        cookie = f.read()</span><br><span class="line">    cookies = json.loads(cookie)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#登录之后的微信公众号首页url变化为：https://mp.weixin.qq.com/cgi-bin/home?t=home/index&amp;lang=zh_CN&amp;token=1849751598，从这里获取token信息</span></span><br><span class="line">    response = requests.get(url=url, cookies=cookies)</span><br><span class="line">    token = re.findall(<span class="string">r'token=(\d+)'</span>, str(response.url))[<span class="number">0</span>]</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#搜索微信公众号的接口地址</span></span><br><span class="line">    search_url = <span class="string">'https://mp.weixin.qq.com/cgi-bin/searchbiz?'</span></span><br><span class="line">    <span class="comment">#搜索微信公众号接口需要传入的参数，有三个变量：微信公众号token、随机数random、搜索的微信公众号名字</span></span><br><span class="line">    query_id = &#123;</span><br><span class="line">        <span class="string">'action'</span>: <span class="string">'search_biz'</span>,</span><br><span class="line">        <span class="string">'token'</span> : token,</span><br><span class="line">        <span class="string">'lang'</span>: <span class="string">'zh_CN'</span>,</span><br><span class="line">        <span class="string">'f'</span>: <span class="string">'json'</span>,</span><br><span class="line">        <span class="string">'ajax'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'random'</span>: random.random(),</span><br><span class="line">        <span class="string">'query'</span>: query,</span><br><span class="line">        <span class="string">'begin'</span>: <span class="string">'0'</span>,</span><br><span class="line">        <span class="string">'count'</span>: <span class="string">'5'</span></span><br><span class="line">        &#125; </span><br><span class="line">    <span class="comment">#打开搜索微信公众号接口地址，需要传入相关参数信息如：cookies、params、headers</span></span><br><span class="line">    search_response = requests.get(search_url, cookies=cookies, headers=header, params=query_id)</span><br><span class="line">    <span class="comment">#print(search_response)</span></span><br><span class="line">    <span class="comment">#取搜索结果中的第一个公众号</span></span><br><span class="line">    lists = search_response.json().get(<span class="string">'list'</span>)[<span class="number">0</span>]</span><br><span class="line">    print(lists)</span><br><span class="line">    <span class="comment">#获取这个公众号的fakeid，后面爬取公众号文章需要此字段</span></span><br><span class="line">    fakeid = lists.get(<span class="string">'fakeid'</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#微信公众号文章接口地址</span></span><br><span class="line">    appmsg_url = <span class="string">'https://mp.weixin.qq.com/cgi-bin/appmsg?'</span></span><br><span class="line">    <span class="comment">#搜索文章需要传入几个参数：登录的公众号token、要爬取文章的公众号fakeid、随机数random</span></span><br><span class="line">    query_id_data = &#123;</span><br><span class="line">        <span class="string">'token'</span>: token,</span><br><span class="line">        <span class="string">'lang'</span>: <span class="string">'zh_CN'</span>,</span><br><span class="line">        <span class="string">'f'</span>: <span class="string">'json'</span>,</span><br><span class="line">        <span class="string">'ajax'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'random'</span>: random.random(),</span><br><span class="line">        <span class="string">'action'</span>: <span class="string">'list_ex'</span>,</span><br><span class="line">        <span class="string">'begin'</span>: <span class="string">'0'</span>,<span class="comment">#不同页，此参数变化，变化规则为每页加5</span></span><br><span class="line">        <span class="string">'count'</span>: <span class="string">'5'</span>,</span><br><span class="line">        <span class="string">'query'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'fakeid'</span>: fakeid,</span><br><span class="line">        <span class="string">'type'</span>: <span class="string">'9'</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">#打开搜索的微信公众号文章列表页</span></span><br><span class="line">    appmsg_response = requests.get(appmsg_url, cookies=cookies, headers=header, params=query_id_data)</span><br><span class="line">    print(appmsg_response.json())</span><br><span class="line">    <span class="comment">#获取文章总数</span></span><br><span class="line">    max_num = appmsg_response.json().get(<span class="string">'app_msg_cnt'</span>)</span><br><span class="line">    print(max_num)</span><br><span class="line">    <span class="comment">#print(max_num)</span></span><br><span class="line">    <span class="comment">#每页至少有5条，获取文章总的页数，爬取时需要分页爬</span></span><br><span class="line">    num = int(int(max_num) / <span class="number">5</span>)</span><br><span class="line">    <span class="comment">#print(num)</span></span><br><span class="line">    <span class="comment">#起始页begin参数，往后每页加5</span></span><br><span class="line">    begin = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> num + <span class="number">1</span> &gt; <span class="number">0</span> :</span><br><span class="line">        query_id_data = &#123;</span><br><span class="line">            <span class="string">'token'</span>: token,</span><br><span class="line">            <span class="string">'lang'</span>: <span class="string">'zh_CN'</span>,</span><br><span class="line">            <span class="string">'f'</span>: <span class="string">'json'</span>,</span><br><span class="line">            <span class="string">'ajax'</span>: <span class="string">'1'</span>,</span><br><span class="line">            <span class="string">'random'</span>: random.random(),</span><br><span class="line">            <span class="string">'action'</span>: <span class="string">'list_ex'</span>,</span><br><span class="line">            <span class="string">'begin'</span>: <span class="string">'&#123;&#125;'</span>.format(str(begin)),</span><br><span class="line">            <span class="string">'count'</span>: <span class="string">'5'</span>,</span><br><span class="line">            <span class="string">'query'</span>: <span class="string">''</span>,</span><br><span class="line">            <span class="string">'fakeid'</span>: fakeid,</span><br><span class="line">            <span class="string">'type'</span>: <span class="string">'9'</span></span><br><span class="line">            &#125;</span><br><span class="line">        print(<span class="string">'正在翻页：--------------'</span>,begin)</span><br><span class="line"> </span><br><span class="line">        <span class="comment">#获取每一页文章的标题和链接地址，并写入本地文本中</span></span><br><span class="line">        query_fakeid_response = requests.get(appmsg_url, cookies=cookies, headers=header, params=query_id_data)</span><br><span class="line">        print(query_fakeid_response)</span><br><span class="line">        fakeid_list = query_fakeid_response.json().get(<span class="string">'app_msg_list'</span>)</span><br><span class="line">        <span class="comment">#print(fakeid_list)</span></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> fakeid_list:</span><br><span class="line">            content_link=item.get(<span class="string">'link'</span>) <span class="comment">#链接</span></span><br><span class="line">            content_title=item.get(<span class="string">'title'</span>) <span class="comment">#题目</span></span><br><span class="line">			   <span class="comment"># 我只需要盘前简报</span></span><br><span class="line">            <span class="keyword">if</span> re.search(<span class="string">'彭博盘前简报'</span>, content_title):</span><br><span class="line">                print(content_title)</span><br><span class="line">                update_time=time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>, time.localtime(item.get(<span class="string">'update_time'</span>))) <span class="comment">#发布时间</span></span><br><span class="line">                <span class="comment">#print(content_title+"\t"+content_link+"\t""+update_time+"\n"))</span></span><br><span class="line">                <span class="keyword">with</span> open(fileName,<span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> fh:</span><br><span class="line">                    fh.write(content_title+<span class="string">"\t"</span>+content_link+<span class="string">"\t"</span>+update_time+<span class="string">"\n"</span>)</span><br><span class="line">        num -= <span class="number">1</span></span><br><span class="line">        begin = int(begin)</span><br><span class="line">        begin+=<span class="number">5</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment">#登录微信公众号，获取登录之后的cookies信息，并保存到本地文本中</span></span><br><span class="line">        weChat_login()</span><br><span class="line">        <span class="comment">#登录之后，通过微信公众号后台提供的微信公众号文章接口爬取文章</span></span><br><span class="line">        <span class="keyword">for</span> query <span class="keyword">in</span> gzlist:</span><br><span class="line">            <span class="comment">#爬取微信公众号文章，并存在本地文本中</span></span><br><span class="line">            print(<span class="string">"开始爬取公众号："</span>+query)</span><br><span class="line">            get_content(query)</span><br><span class="line">            print(<span class="string">"爬取完成"</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(str(e))</span><br></pre></td></tr></table></figure>

<h3 id="本部分参考链接"><a href="#本部分参考链接" class="headerlink" title="本部分参考链接"></a>本部分参考链接</h3><p><a href="https://blog.nowcoder.net/n/a1920b33dae144bfb56f17b48ed90e6a" target="_blank" rel="noopener">python爬取公众号历史文章_牛客博客</a><br><a href="https://blog.csdn.net/weixin_39688870/article/details/111645741" target="_blank" rel="noopener">python爬取公众号阅读量_Python爬取微信公众号文章以及在看阅读数_weixin_39688870的博客-CSDN博客</a></p>
<h2 id="处理数据"><a href="#处理数据" class="headerlink" title="处理数据"></a>处理数据</h2><p>需要的文件：<br>1）上文爬到的结果文件；<br>2）中概ETF 513050的行情信息，由通达信导出；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dt = pd.read_table(<span class="string">'articles.csv'</span>, header = <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按需处理数据</span></span><br><span class="line">dt = dt.drop_duplicates()</span><br><span class="line">dt = dt[[ <span class="literal">True</span> <span class="keyword">if</span> re.search(<span class="string">'彭博盘前简报'</span>, x) <span class="keyword">else</span> <span class="literal">False</span> <span class="keyword">for</span> x <span class="keyword">in</span> dt[<span class="number">0</span>]]]</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(columns = [<span class="string">'date'</span>, <span class="string">'change'</span>])</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(<span class="number">0</span>, dt.shape[<span class="number">0</span>]):    </span><br><span class="line">    <span class="comment">#print(dt[1])</span></span><br><span class="line">    url = list(dt[<span class="number">1</span>])[index]</span><br><span class="line">    date = list(dt[<span class="number">2</span>])[index][:<span class="number">10</span>]</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    soup = BeautifulSoup(res.content, <span class="string">"html.parser"</span>)</span><br><span class="line">    content = soup.get_text()</span><br><span class="line">    <span class="comment">#match = re.search('(中概股：.*)美国债市', content)</span></span><br><span class="line">    <span class="comment"># 这里我只使用了金龙中国指数作为测试</span></span><br><span class="line">    match1 = re.search(<span class="string">'金龙中国指数上涨(\d\.\d?)%'</span>, content)</span><br><span class="line">    match2 = re.search(<span class="string">'金龙中国指数下跌(\d\.\d?)%'</span>, content)</span><br><span class="line">    row = dict()</span><br><span class="line">    change = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> match1:</span><br><span class="line">        change = float(match1.group(<span class="number">1</span>))</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> match2:</span><br><span class="line">        change = <span class="number">0</span> - float(match2.group(<span class="number">1</span>))</span><br><span class="line">        </span><br><span class="line">    row = &#123;<span class="string">'date'</span>: date, <span class="string">'change'</span>: change&#125;</span><br><span class="line">    df = df.append(row, ignore_index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">df[<span class="string">'date'</span>] = pd.to_datetime(df[<span class="string">'date'</span>])</span><br><span class="line">df  = df.set_index(<span class="string">'date'</span>)</span><br><span class="line">df = df[df.change != <span class="number">0</span>]</span><br><span class="line">df = df.drop_duplicates()</span><br><span class="line"></span><br><span class="line"><span class="comment"># etf 行情</span></span><br><span class="line">price = pd.read_table(<span class="string">'513050.xls'</span>)</span><br><span class="line">new_column = [x.strip() <span class="keyword">for</span> x <span class="keyword">in</span> price.columns]</span><br><span class="line">price.columns = new_column</span><br><span class="line">price[<span class="string">'date'</span>] = pd.to_datetime(price[<span class="string">'时间'</span>], format=<span class="string">'%Y/%m/%d'</span>)</span><br><span class="line"><span class="comment"># 计算每日开盘买入，收盘价卖出的话，收益率多少</span></span><br><span class="line">price[<span class="string">'etf_change'</span>] = (price[<span class="string">'收盘'</span>] - price[<span class="string">'开盘'</span>])/price[<span class="string">'开盘'</span>]*<span class="number">100</span></span><br><span class="line">price = price[[<span class="string">'date'</span>, <span class="string">'开盘'</span>, <span class="string">'收盘'</span>, <span class="string">'etf_change'</span>]]</span><br><span class="line">price = price.set_index(<span class="string">'date'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并数据，看下信合和场内的etf日涨跌幅是否有关系？</span></span><br><span class="line"><span class="comment"># 这边看效果不太好，可能和有缺失值相关</span></span><br><span class="line">dm = pd.concat([price, df], join = <span class="string">'inner'</span>, axis = <span class="number">1</span>)</span><br><span class="line">fig = plt.figure(figsize = (<span class="number">20</span>,<span class="number">8</span>))</span><br><span class="line">dm.change.plot(color = <span class="string">'blue'</span>,kind = <span class="string">'bar'</span>, alpha = <span class="number">0.2</span>)</span><br><span class="line">dm.etf_change.plot(color = <span class="string">'red'</span>, kind = <span class="string">'bar'</span>, alpha = <span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出信号文件</span></span><br><span class="line"><span class="comment"># 信号日期往前推一天</span></span><br><span class="line">dm[<span class="string">'date'</span>] = [x - np.timedelta64(<span class="number">1</span>, <span class="string">'D'</span>) <span class="keyword">for</span> x <span class="keyword">in</span> dm.index]</span><br><span class="line">dm = dm.set_index(<span class="string">'date'</span>)</span><br><span class="line">dm[<span class="string">'instrument'</span>] = <span class="string">'510500.HOF'</span></span><br><span class="line">dm.to_csv(<span class="string">'signal.csv'</span>)</span><br></pre></td></tr></table></figure>

<p>涨跌幅是否一致，画了个图，不是很一致…<br>不过，大过年的，来都来了… 就再回测一把吧….</p>
<h2 id="回测平台回测"><a href="#回测平台回测" class="headerlink" title="回测平台回测"></a>回测平台回测</h2><p>使用的平台是bigquant，交易逻辑很简单，还有优化的空间：<br>1）当信号大于1时，买入；<br>2）如果买入后第二天有信号，且信号小于0才卖出，否则不卖出； 如果没有 信号，则直接卖出；</p>
<p>回测有 4.25% 的收益率，跑赢基准 7个点 +.+</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>其实我觉得公众号的能源和油气也可以试试，不过观察来看华宝油气一般开盘价就是最高点，不给买入的机会…. 后边再试试；<br>算是对自己观察所得另类数据的一个小尝试吧，有好多东西要学习啊啊啊啊啊啊啊…..</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/10/30/diligent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/10/30/diligent/" itemprop="url">勤劳</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-10-30T09:35:13+08:00">
                2021-10-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.8k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="写在前边"><a href="#写在前边" class="headerlink" title="写在前边"></a>写在前边</h3><p>觉得自己有些懒了，找些片段记录下，补充一下。<br>这就像饿了，去觅食一样。</p>
<p>之前做数据分析的时候，可视化会用到云图，简单来说就是基于文本内容统计词频，然后频率越高，字号越大，表达一下该词的重要性。</p>
<p>那我想读书也可以，以某一个专题去摘录一些片段，如果能略有收获，那再好不过。</p>
<h3 id="勤"><a href="#勤" class="headerlink" title="勤"></a>勤</h3><p><strong>我一直保持全勤（我从不过什么圣礼拜一￼），所以得到师傅的器重</strong>，再加上我排字麻利得不是一般，于是所有的急活都派给我干，这种活一般来说，拿钱要多一点。<strong>所以这一段日子我过得十分惬意。</strong></p>
<p>等我把版拆开，将铅字在字盘里归好位等第二天用时，已经是夜里十一点了，有时候还要晚：因为别的朋友还会时不时地送来一些零活，我们只好往后拖。<br>但我下定决心每天仍然排印一张对开纸，结果有天夜里，我已经锁定印版，以为一天的工作结束了的时候，不小心把一个印版碰坏了，有两页铅字乱得一塌糊涂，我马上拆版重排，排好了才上床睡觉。<strong>我们这样勤奋苦干，邻居们有目共睹，我们开始赢得了声望和信誉；</strong>我还听说商界的夜夜俱乐部有人提起新开张的印刷所（指的是富兰克林新开的），普遍的看法是必死无疑，因为当地已经有了凯默和布雷福德两家印刷所；然而贝尔德博士（多年以后你我在苏格兰他的故乡圣安德鲁斯见过他）则力排众议；<strong>因为那个富兰克林的勤奋，他说，是他的同行们望尘莫及的：我离开俱乐部回家时，他还在干活呢；他的邻居还没有起床，他又在工作了。</strong></p>
<p>为了确保我作为一个生意人的信誉和人格，我处处留心，不仅要<strong>实打实的勤奋节俭</strong>，而且在面子上也避免有相反的表现。我衣着朴素；从不到娱乐场消闲鬼混；我从不出去钓鱼打猎；的确，看书有时候使我忘乎所以，误了正事；不过这种情况非常罕见，又十分隐蔽，没有引起物议：为了证明我不是个甩手掌柜，有时候我把从商店买来的纸张用手推车推过大街小巷送到家中。<strong>这样一来，人们认为我是个勤奋、发达的青年，买东西按时付款，进口文具的商人拉我做他们的客户，别的商人提议给我供书代销，我的事业顺风顺水。</strong></p>
<p>小时候，父亲对我谆谆教导，所罗门的一句箴言被屡屡重复：<strong>“你看见办事殷勤的人吗？他必站在君王面前，必不站在下贱人面前。”￼</strong>从那时候起，<strong>我就把勤奋看成谋求财富和功名的手段</strong>，这句话给我很大的鼓励：尽管我并不认为我真的要站在君王面前，不过，后来这种事还真的发生了。——<strong>因为我曾在五位君王面前站过，甚至还有幸坐下来跟一位丹麦国王同席共餐。</strong></p>
<p>六，勤奋。<br>珍惜时光。手里总忙有益之事。剪除一切无谓之举。<br>（路过：这里是富兰克林列出来的有必要让自己遵守和养成习惯的十三种美德，勤奋是第六项）</p>
<p><strong>节俭和勤奋，使我摆脱了剩下的债务，获得了独立和富裕，所以使我更容易实施诚信和正义等等。</strong></p>
<p>把长期持续的健康归功于节制，它至今还给他留下一副好身板。<strong>多亏了勤奋和节俭，他早年景况顺遂，获取了财富，还学得了种种知识，使他成为一位有用的公民，为他在学术界赢得了一定的声誉。</strong>他把祖国委任他的光荣职务归功于诚信和正义。这一整套美德，哪怕还处在他能获得的那种不完善的状态下，也多亏了它们的联合影响，使他能够脾气平和，谈笑风生，所以他一直人缘很好，甚至深得年轻朋友的喜欢。￼所以我希望我的某些子孙不妨学习学习，从中获得好处。</p>
<p><strong>怠惰使万事艰难，勤勉使一切便当</strong>，穷理查就是这么说的；<strong>起得晚就得整天奔波，到天黑还赶不完自己的工作</strong>。<strong>懒惰走路慢腾腾，穷困赶上快如风</strong>，我们在穷理查的历书上读到的就是这样。他还说，<strong>必须人逼事，勿让事逼人。</strong>睡得早，起得早，富裕、聪明、身体好。</p>
<p>我想我听到你们有些人说，<strong>难道一个人不可有闲暇吗？ 朋友，我要告诉你穷理查的话：要想得到闲暇，就好好利用时光。既然你对一分钟没有把握，就别丢掉一小时。</strong>闲暇是准备做有益的事情的时光。这种闲暇，勤奋的人会得到，懒汉却永远不会有。所以穷理查说，<strong>闲暇的生活与懒惰的生活是两码事。</strong></p>
<p>认为怠惰比勤奋更能使你舒畅吗？不，因为穷理查说<strong>：懒惰生烦恼，安逸惹酸苦。不劳力的人只靠智谋生活，会因主干不牢而摧折。勤奋给人舒适、富足和尊敬。</strong></p>
<p>以上全部摘录于《富兰克林自传》</p>
<h3 id="写在后边"><a href="#写在后边" class="headerlink" title="写在后边"></a>写在后边</h3><p>我为什么要做这样的摘录，并且把后边把因为勤劳而获得的好处也加粗了呢? 富兰克林是这么说的：</p>
<blockquote>
<p>我之所以这样毫无顾忌地强调自己的勤奋，尽管有自吹自擂之嫌，目的无非是让读过它的子孙后代们看到在这段叙述中勤奋产生的于我有利的效果时，就可以知道这种美德的用处了。</p>
</blockquote>
<p>看了就能记住吗？记住就能做到吗？真得会有效果吗？富兰克林是这么说的：</p>
<blockquote>
<p>然而，总体来讲，<strong>虽然我从来没有达到我曾经雄心勃勃要达到的那种完美境界，而且还相去甚远，但我通过努力成为一个比较优秀、比较快乐的人，若不努力我是做不到这一步的</strong>；就像有些人临摹字帖，一心要练就一笔好字，尽管他们永远达不到他们希望达到的字帖的那种优秀水准，但通过努力书法大有长进，字写得漂亮清晰，也算说得过去了。</p>
</blockquote>
<p>其他人的传记里，也有不少，篇幅原因，记录到这里；</p>
<p>2021年10月30日 @XA</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/10/24/Simons/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/10/24/Simons/" itemprop="url">詹姆斯·西蒙斯</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-10-24T10:28:36+08:00">
                2021-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.6k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  5 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Timeline"><a href="#Timeline" class="headerlink" title="Timeline"></a>Timeline</h3><p><strong>出生</strong><br>1938年4月25日，生于波士顿郊区牛顿镇，是一个制鞋厂老板的儿子，3 岁就立志成为数学家。</p>
<p>从牛顿高中牛业后，他进人麻省理工学院，从师于著名的数学家安布罗斯和辛格。</p>
<p><strong>20岁</strong><br>1958年，他获得了学士学位。</p>
<p><strong>23岁</strong><br>仅仅三年（1961年）后，他就拿到了加州大学伯克利分校的博士学位。</p>
<p><strong>24岁</strong><br>一年后（1961年）他成为哈佛大学数学系的教授。</p>
<p>早在1961年，他和麻省理工学院的同学投资于哥伦比亚地砖和管线公司；在伯克利，他尝试做股票交易，但是<strong>交易结果并不太好</strong>。</p>
<p><strong>27岁</strong><br>1964年，他离开了大学校园，进人美国国防部下属的一个非营利组织一国防逻辑分析协会，并进行代码破解工作。没过多久，《时代周刊》上关于越南战争的残酷报道让他意识到他的工作实际上正在帮助美军在越南的军事行动，反战的他于是向《新闻周刊》写信说应该结束战争。当他把反战想法告诉老板时，很自然地就被解雇了。他又回到了学术界，成为纽约州立石溪大学的数学系主任，在那里做了8年的纯数学研究。</p>
<p><strong>37岁</strong><br>1974年，他与陈省身联合发表了著名的论文《典型群和几何不变式》，创立了著名的陈-西蒙斯理论，该几何理论对理论物理学具有重要意义，广泛应用于从超引力到黑洞。</p>
<p><strong>38岁</strong><br>1976年，西蒙斯获得了每5年一次的全美数学科学维布伦奖金，这是美国数学世界里的最高荣耀。</p>
<p>（在理论研究之余，他开始醉心于股票和期货交易。）</p>
<p><strong>40岁</strong><br>1978年，他离开石溪大学创立私人投资基金 Limroy，该基金投资领城广江，涉及从风险投资到外汇交易；最初主要采用基本面分析方法，例如，通过分析美联储货币政策和利率走向来判断市场价格走势。</p>
<p><strong>50岁</strong><br>十年后（1988年），西蒙斯决定成立一个纯粹量化投资的对冲基金。他关闭了Limroy，并在1988年3月成立了大奖章基金，最初主要涉及期货交易。</p>
<p>1988年该基金盈利8.8%。</p>
<p><strong>51岁</strong><br>1989年则开始亏损，西蒙斯不得不在 1989年6月份停止交易。在接下来的6个月中，西蒙斯和普林斯顿大学的数学家勒费尔重新开发了交易策略，并从基本面分析转向量化分析。</p>
<p>（大奖章基金主要通过研究市场历史资料来发现统计相关性，以预测期货、货币、股票市场的短期运动，并通过数千次快速的日内短线交易来捕捉稍纵即逝的市场机会，交易量之大甚至有时能占到整个纳斯达克交易量的10%。当交易开始时，交易模型决定买卖品种和时机，20名交易员则遵守指令在短时间内大量地交易各种美国和海外的期货，包括商品期货、金融期货、股票和债券。但在某些特定情况下，比如市场处在极端波动的时候，交易会切换到手工状态。）</p>
<p><strong>55岁</strong><br>经过几年眩目的增长，大奖章基金在1993年达到2.7亿美元，并开始停止接受新资金。</p>
<p><strong>56岁</strong><br>1994年，西蒙斯的文艺复兴科技公司从12个雇员增加到36个，并交易40种金融产品。</p>
<p><strong>74岁</strong><br>现在（书的印刷时间2012年），公司有150个雇员，交易60种金融产品，基金规模则有50 亿美元。在150名雇员中有三分之一是拥有自然科学博士学位的顶尖科学家，涵盖数学、理论物理学、量子物理学和统计学等领域。所有雇员中只有两位是华尔街老手，而且该公司既不从商学院中雇用职员，也不从华尔街雇用职员，这在美国投资公司中几乎是独一无二的。</p>
<h3 id="成就"><a href="#成就" class="headerlink" title="成就"></a>成就</h3><p>无论是1998年俄罗斯债券危机，还是本世纪初的互联网泡沫，大奖章基金历经数次金融危机，始终屹立不倒，令有效市场假说都黯然失色。</p>
<p>1989年到2009年间，他操盘的大奖章基金平均年回报率高达35%，较同期标普500指数年均回报率高20多个百分点，比金融大鳄索罗斯和股神巴菲特的操盘表现都高出10余个百分点。</p>
<p>即便是在次贷危机爆发的2008年，该基金的回报率仍高达80%。从2002年底至2005年底，规模为50亿美元的大奖章基金己经为投资者支付了60多亿美元的回报。</p>
<p>这个回报率是在扣除了5%的资产管理费和44%的投资收益分成以后得出的，并且己经经过了車计。值得一提的是，西蒙斯收取的这两项费用应该是对冲基金界最高的，相当于平均收费标准的两倍以上。</p>
<h3 id="语录"><a href="#语录" class="headerlink" title="语录"></a>语录</h3><p><strong>和流行的 “买人并长期持有”的投资理念截然相反，西蒙斯认为市场的异常状态通常都是微小而且短暂的</strong>，‘’我们随时都在买人卖出和卖出买人，我们依靠活跃赚钱‘’，西蒙斯说。</p>
<p>“文艺复兴科技公司没有也不需要那么高的杠杆比例，公司在操作时从来没有任何先人为主的概念，<strong>而是只寻找那些可以复制的微小的获利瞬间</strong>，我们绝不以 “市场恢复正常’作为赌注投人资金，有一天市场终会正常的，但谁知道是哪一天。”</p>
<p>西蒙斯透露，公司对交易品种的选择有3个标准：即公开交易品种、流动性高，同时符合模型设置的某些要求。他表示：<strong>“我是模型先生，不想进行基本面分析。模型的最重要的优势是可以降低风险。而依靠个人判断选股，你可能一夜暴富，也可能在第二天又输得精光。”</strong></p>
<p>摘录自《量化投资-技术与策略》</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/10/23/arbitrage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/10/23/arbitrage/" itemprop="url">uqer实现期现套利</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-10-23T14:40:26+08:00">
                2021-10-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  792 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>核心思想是股指期货和指数的基差会周期性变化，那么贴水的时候持有股指期货，升水的时候持有指数的可交易标的，可以实现套利的目的。</p>
<p>分三步：</p>
<ol>
<li>基于分钟行情计算基差；</li>
<li>上传到有uqer生成交易逻辑，进行回测；</li>
<li>中间踩了不少坑，时间关系不细说；</li>
</ol>
<p>总体来说，实现期现套利的过程比较麻烦，bigquant上不能跨品种回测，而uqer普通用户有没有分钟行情数据（但是可以自己上传信号文件实现目的），然后内存太小了，也没法很好的进行后续的参数优化，最终能实现大概10%的年化，16.2%的回撤。</p>
<p>主要是记录一下，脚本如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 期现套利</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">start = <span class="string">'2017-01-01'</span>                  <span class="comment"># 回测起始时间</span></span><br><span class="line">end = <span class="string">'2021-09-22'</span>                    <span class="comment"># 回测结束时间</span></span><br><span class="line">benchmark = <span class="string">'ZZ500'</span>                   <span class="comment"># 策略参考标准</span></span><br><span class="line">universe = [<span class="string">'510500.XSHG'</span>] + [<span class="string">'ICM0'</span>]              <span class="comment"># 证券池，也可以在这里添加多个证券, M0 主力合约, L0 当月合约</span></span><br><span class="line">capital_base = <span class="number">1000000</span>                 <span class="comment"># 起始资金, 期货和etf各100w</span></span><br><span class="line">freq = <span class="string">'m'</span>                         <span class="comment"># 日线策略</span></span><br><span class="line">refresh_rate = <span class="number">1</span>                     <span class="comment"># 每个交易日调仓</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 账户初始化配置</span></span><br><span class="line">stock_commission = Commission(buycost=<span class="number">0</span>, sellcost=<span class="number">0</span>, unit=<span class="string">'perValue'</span>)</span><br><span class="line">futures_commission = Commission(buycost=<span class="number">0.000023</span>, sellcost=<span class="number">0.000023</span>, unit=<span class="string">'perValue'</span>)</span><br><span class="line">slippage = Slippage(value=<span class="number">0</span>, unit=<span class="string">'perValue'</span>)</span><br><span class="line"><span class="comment">#argin_rate = &#123;'IC': 0.20&#125;</span></span><br><span class="line"></span><br><span class="line">accounts = &#123;</span><br><span class="line">    <span class="string">'stock_account'</span>: AccountConfig(account_type=<span class="string">'security'</span>, capital_base=capital_base, commission=stock_commission, slippage=slippage),</span><br><span class="line">    <span class="string">'futures_account'</span>: AccountConfig(account_type=<span class="string">'futures'</span>, capital_base=capital_base, commission=futures_commission, slippage=slippage)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取文件</span></span><br><span class="line">dt = pd.read_csv(<span class="string">'基差_etf1.csv'</span>)</span><br><span class="line">dt = dt.set_index(<span class="string">'date'</span>) </span><br><span class="line"></span><br><span class="line">date_list = list()</span><br><span class="line"></span><br><span class="line">stock_buy_date = list()</span><br><span class="line">fut_buy_date = list()</span><br><span class="line"></span><br><span class="line">stock_sell_date = list()</span><br><span class="line">fut_sell_date = list()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 贴水阈值</span></span><br><span class="line">low_value = <span class="number">-20</span></span><br><span class="line"><span class="comment"># 升水阈值</span></span><br><span class="line">high_value = <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移仓日ic不交易</span></span><br><span class="line">change_date = list()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(account)</span>:</span> </span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_data</span><span class="params">(account)</span>:</span> </span><br><span class="line">    stock_account = account.get_account(<span class="string">'stock_account'</span>)</span><br><span class="line">    future_account = account.get_account(<span class="string">"futures_account"</span>)</span><br><span class="line">    today = account.now.strftime(<span class="string">'%Y-%m-%d'</span>)</span><br><span class="line">    minu = account.now.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line">    <span class="comment">#print(minu)</span></span><br><span class="line">    <span class="comment">#print(type(minu))</span></span><br><span class="line">    <span class="keyword">if</span> minu <span class="keyword">not</span> <span class="keyword">in</span> dt.index:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        basis = dt.loc[minu].basis</span><br><span class="line">    stock_pos = stock_account.get_positions()   </span><br><span class="line">    future_pos = future_account.get_positions()    </span><br><span class="line">    </span><br><span class="line">    <span class="comment"># etf </span></span><br><span class="line">    etf = <span class="string">'510500.XSHG'</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 获取主连, 映射</span></span><br><span class="line">    main_contract_IC = account.get_symbol(<span class="string">'ICM0'</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 检查是否换合约</span></span><br><span class="line">    <span class="keyword">if</span> account.mapping_changed(<span class="string">'ICM0'</span>):</span><br><span class="line">        symbol_before, symbol_after = account.get_rolling_tuple(<span class="string">'ICM0'</span>)</span><br><span class="line">        <span class="comment">#rint(symbol_before, 'changed to', symbol_after)</span></span><br><span class="line">        Position = future_account.get_position(symbol_before)</span><br><span class="line">        <span class="keyword">if</span> Position&gt; <span class="number">0</span>:</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#print(minu, ': switch', symbol_before, symbol_after)</span></span><br><span class="line"></span><br><span class="line">            future_account.switch_position(symbol_before, symbol_after) <span class="comment">#移仓指令</span></span><br><span class="line">            change_date.append(today)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#basis = DataAPI.MktFutIdxBasisGet(secID=u"",ticker=main_contract_IC,beginDate=today,endDate=today,field=['basis'],pandas="1")['basis'].iloc[0]</span></span><br><span class="line">    <span class="comment"># 买卖etf</span></span><br><span class="line">    <span class="comment"># 升水的时候买etf, 买入后</span></span><br><span class="line">    <span class="keyword">if</span> basis &gt;= high_value <span class="keyword">and</span> etf <span class="keyword">not</span> <span class="keyword">in</span> stock_account.get_positions() <span class="keyword">and</span> today <span class="keyword">not</span> <span class="keyword">in</span> stock_buy_date:</span><br><span class="line">        <span class="comment">#print(minu, 'buy etf', basis, account.current_price(etf))</span></span><br><span class="line">        amount = int(stock_account.cash/account.current_price(etf) / <span class="number">100</span>) * <span class="number">100</span> </span><br><span class="line">        <span class="comment"># 计算买入数量</span></span><br><span class="line">        <span class="comment">#print('numbers:', amount)</span></span><br><span class="line">        stock_account.order_pct(etf, <span class="number">0.99</span>)</span><br><span class="line">        stock_buy_date.append(today)</span><br><span class="line">        <span class="comment">#stock_account.order(etf, 10000) </span></span><br><span class="line">    <span class="comment"># 贴水的时候卖etf , 卖出后不再卖出 </span></span><br><span class="line">    <span class="keyword">elif</span> basis &lt;= low_value <span class="keyword">and</span> etf <span class="keyword">in</span> stock_account.get_positions() <span class="keyword">and</span> today <span class="keyword">not</span> <span class="keyword">in</span> stock_buy_date <span class="keyword">and</span> today <span class="keyword">not</span> <span class="keyword">in</span> stock_sell_date:</span><br><span class="line">        <span class="comment">#print(minu, 'sell etf', basis, account.current_price(etf))</span></span><br><span class="line">        stock_account.order_to(etf, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        stock_sell_date.append(today)</span><br><span class="line">       </span><br><span class="line">    <span class="comment"># 买卖期货, 分开写,逻辑清晰一些</span></span><br><span class="line">    <span class="keyword">if</span> basis &gt;= high_value <span class="keyword">and</span> main_contract_IC <span class="keyword">in</span> future_account.get_positions() <span class="keyword">and</span> today <span class="keyword">not</span> <span class="keyword">in</span> fut_sell_date <span class="keyword">and</span> today <span class="keyword">not</span> <span class="keyword">in</span> fut_buy_date <span class="keyword">and</span> today <span class="keyword">not</span> <span class="keyword">in</span> change_date:</span><br><span class="line">        <span class="comment"># 当天买入后，不再卖出</span></span><br><span class="line">        <span class="comment"># 当天卖出后，不再卖出..</span></span><br><span class="line">        <span class="comment">#print(minu, 'sell ic', basis, account.current_price(main_contract_IC))</span></span><br><span class="line">        future_account.order(main_contract_IC, <span class="number">-1</span>, <span class="string">'close'</span>)</span><br><span class="line">        fut_sell_date.append(today)</span><br><span class="line">    <span class="keyword">elif</span> basis &lt;= low_value <span class="keyword">and</span> main_contract_IC <span class="keyword">not</span> <span class="keyword">in</span> future_account.get_positions() <span class="keyword">and</span> today <span class="keyword">not</span> <span class="keyword">in</span> fut_buy_date <span class="keyword">and</span> today <span class="keyword">not</span> <span class="keyword">in</span> change_date:  </span><br><span class="line">        <span class="comment"># 当天买入后，不再买入</span></span><br><span class="line">        <span class="comment">#print(minu, 'buy ic', basis, account.current_price(main_contract_IC))</span></span><br><span class="line">        future_account.order(main_contract_IC, <span class="number">1</span>, <span class="string">'open'</span>)</span><br><span class="line">        fut_buy_date.append(today)</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    stock_pos = stock_account.get_positions() </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    print('==========================', minu , '============================================')</span></span><br><span class="line"><span class="string">    print('stock position:')</span></span><br><span class="line"><span class="string">    print(stock_pos)</span></span><br><span class="line"><span class="string">    print('stock cash:')</span></span><br><span class="line"><span class="string">    fut_pos = future_account.get_positions() </span></span><br><span class="line"><span class="string">    print('future position:')</span></span><br><span class="line"><span class="string">    print(fut_pos)</span></span><br><span class="line"><span class="string">    print(stock_account.pending_blotter)</span></span><br><span class="line"><span class="string">    print(account.current_price(etf))</span></span><br><span class="line"><span class="string">    print('---------------------------------------------------------------------------------')</span></span><br><span class="line"><span class="string">    '''</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/08/15/Bodhi3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="朝简单处想 往认真处行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/08/15/Bodhi3/" itemprop="url">选择的可能性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-15T13:37:06+08:00">
                2021-08-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="写在前边"><a href="#写在前边" class="headerlink" title="写在前边"></a>写在前边</h3><p>关注的一个博主说最近做决策时的两个标准：<br>1）选择难的；<br>2）选择带来更多可能性的。</p>
<p>想说说第二个，我觉得很多不同领域的道理是相通的。</p>
<p>比如投资里边有个概念：很多新手关注收益率，其实更重要的是资产配置和风险管理。所以你要按照风险偏好买股票，买债券，买货基，还有活期保险等，配置不同的仓位以及不买P2P这种可能把老本赔没了的产品。</p>
<p>工作也是，上一份工作加班特别多，大量地消耗自己的时间，身体和精力。既然投资需要资产配置，那为啥可以让一份工作占据了自己所有的生活和时间。前同事们以调侃的方式说掉头发，说自己体检的异常项越来越多，我不知道有啥好笑的，甚至有点儿害怕（误）。</p>
<p>生活和关系也是咯，不把自己「押」在一种生活方式（反例是：之前女性的家庭主妇）和一种人际关系。</p>
<p>爱情，友情，亲情统统都要，让这些”行星”以一种合理的方式绕着自己的系统。（反例是：最近因为分手上热搜的事情。我觉得可以，但是没必要，不应该让自己因为一个人走丢了就溃不成兵。）</p>
<p>所有的这些我觉得都可以归纳为可能性。</p>
<p>小孩子比大人有更多可能性（知道这个道理后，我就从来不会觉得小孩子是小孩子）；</p>
<p>有钱比没钱有更多可能性（所以我开始省钱）；</p>
<p>城里的人比俺们村里的人有更多可能性（所以俺挺羡慕他们接了一手好牌，但是牌怎么打看自己）。</p>
<p>属于自己的时间多比少有更多的可能性，所以我辞职了（也有其他原因）。<br>现在的问题在于：我能不能把这多出来的时间做出来新的可能性，我不知道… 方向是这个。</p>
<p>One more thing: 投资里还有个概念，说与其自己乱买股票，不如买宽基，行业ETF（甚至是定投的方式）, 深以为然。同理，如果<strong>不知道自己想要什么样的生活</strong>，可以试着大概按照大多数人的生活方式去生活（该读书时读书，该工作时工作），至少不会出大错，免得被生活教做人。 如果天赋异禀，另说。</p>
<hr>
<p>以下是简短的读书摘要，还是曹德旺的《心若菩提》：</p>
<blockquote>
<p>离开了学校，仍然想读书，怎么办呢? 我就捡哥哥读过的书念。哥哥大我两岁。但和我不同，他从小就是个乖孩子，很听话。母亲和老师都喜欢他。</p>
</blockquote>
<blockquote>
<p>还想读书却不能读了。我就把哥哥读过的书带在身边，边放牛边捡柴之余边自学。看不懂的字，就问哥哥。 哥哥不在身边时，就用《新华字典》和《辞海》查找。</p>
<p><strong>那时的《字典》一本8角钱，是割了一年多的马草攒下的;《辞海》3元钱，是割了三年多的马草才攒够了钱买下的。</strong>我靠字典自学读书的习惯，就是这样养成的。一个一个的字，从它们认得我到我认得它们，也是这么一字一字查出来的。</p>
<p><strong>那时，只要是印有字的纸，我都会拿起来读，我的很多知识的积累，都来自于这样的自学。一直到现在，我仍然爱看各种书籍</strong>，并有一个怪癖到我家千万别向我借书或要书，再好的朋友我都不会给，真是有一点爱书如命。</p>
</blockquote>
<h3 id="写在后边"><a href="#写在后边" class="headerlink" title="写在后边"></a>写在后边</h3><p>读书也是增加了可能性，特别是人就那么点儿时间。<br>记录是为了更好的审视自己。<br>以上</p>
<p>2021年8月15日 下午1:27 @XA<br>记录是为了更好地审视自己</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 侧边广告 -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7093029654692281" data-ad-slot="4703719462" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Nonewood</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">80</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 侧边广告 -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7093029654692281" data-ad-slot="4703719462" data-ad-format="auto" data-full-width-responsive="true"></ins>
     <script>
     (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nonewood</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">137.4k</span>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

  

  <script async src="/js/src/fireworks.js"></script>



 
<script>
  var OriginTitile = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function() {
    if (document.hidden) {
      document.title = "(つェ⊂)我藏好了哦~" + OriginTitile;
      clearTimeout(titleTime);
    } else {
      document.title = "(*´∇｀*) 被你发现啦~" + OriginTitile;
      titleTime = setTimeout(function() {
        document.title = OriginTitile;
      }, 2000);
    }
  });
</script>


 
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
<script>
  function timer() {
    var ages = moment.preciseDiff(moment(),moment(20190801,"YYYYMMDD"));
    ages = ages.replace(/years?/, "年");
    ages = ages.replace(/months?/, "月");
    ages = ages.replace(/days?/, "天");
    ages = ages.replace(/hours?/, "小时");
    ages = ages.replace(/minutes?/, "分");
    ages = ages.replace(/seconds?/, "秒𓃗𓃵𓆉𓇼𓆡");
    ages = ages.replace(/\d+/g, '<span style="color:">$&</span>');
    div.innerHTML = `𓃠𓃰𓃱𓃲𓃟 ${ages}`;
  }
  var div = document.createElement("div");
  //插入到copyright之后
  var copyright = document.querySelector(".copyright");
  document.querySelector(".footer-inner").insertBefore(div, copyright.nextSibling);
  timer();
  setInterval("timer()",1000)
</script>


</body>
</html>
