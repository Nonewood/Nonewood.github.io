<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="9HGY4GvHBQiYcf3ysSZmtQCkRadM6n5ZDPoYRlcr71E">














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
<meta property="og:url" content="http://nonewood.github.io/index.html">
<meta property="og:site_name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://nonewood.github.io/">





<script data-ad-client="ca-pub-7093029654692281" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-7126877795421398",
          enable_page_level_ads: true
     });
</script>

  <title>æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/02/12/fund-follow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/02/12/fund-follow/" itemprop="url">è·å–åŸºé‡‘å‡€å€¼ï¼Œæ ‡è®°ä¹°å–ç‚¹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2022-02-12T19:44:22+08:00">
                2022-02-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  695 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  3 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å†™åœ¨å¼€å¤´"><a href="#å†™åœ¨å¼€å¤´" class="headerlink" title="å†™åœ¨å¼€å¤´"></a>å†™åœ¨å¼€å¤´</h3><p>æƒ³å¯¹ä¹°äº†çš„åŸºé‡‘å¤šä¸Šç‚¹å„¿å¿ƒï¼Œåˆä¸æƒ³å†å„ä¸ª app å»æŸ¥ï¼ˆè€—æ—¶è´¹åŠ›ï¼Œä¸”æä¾›çš„åŠŸèƒ½ä¹Ÿæœ‰é™ï¼‰ï¼Œå°±è‡ªå·±å®ç°ä¸€äº›åŠŸèƒ½ï¼š<br>1ï¼‰æ‹¿åˆ°æŸåªåŸºé‡‘çš„å‡€å€¼ï¼›<br>2ï¼‰æ ‡è®°ä¹°å–ç‚¹ï¼›</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> requests,re,ast</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>]=[<span class="string">'SimHei'</span>] <span class="comment"># æ”¯æŒä¸­æ–‡</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>]=<span class="literal">False</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># æ ¹æ®å¤©å¤©åŸºé‡‘è·å–æ¯æ—¥çš„å‡€å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_data</span><span class="params">(code, n)</span>:</span></span><br><span class="line">    dt = pd.DataFrame(columns=[<span class="string">'ä»£ç '</span>, <span class="string">'æ—¥æœŸ'</span>, <span class="string">'å•ä½å‡€å€¼'</span>, <span class="string">'ç´¯è®¡å‡€å€¼'</span>])</span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">        res = requests.get(<span class="string">'http://fund.eastmoney.com/f10/F10DataApi.aspx?type=lsjz&amp;code='</span> + code + <span class="string">'&amp;page='</span> + str(n) + <span class="string">'&amp;per=20&amp;sdate=&amp;edate=&amp;rt=0.7823397557719116'</span>)</span><br><span class="line">        soup = BeautifulSoup(res.content, <span class="string">"html.parser"</span>)</span><br><span class="line">        value_list = soup.get_text().split(<span class="string">'%'</span>)</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>, len(value_list)<span class="number">-1</span>):</span><br><span class="line">            match = re.search(<span class="string">'(\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;)(\d+\.\d&#123;4&#125;)(\d+\.\d&#123;4&#125;)'</span> ,value_list[x])</span><br><span class="line">            dt = dt.append(&#123;<span class="string">'ä»£ç '</span>: code, <span class="string">'æ—¥æœŸ'</span>: match.group(<span class="number">1</span>), <span class="string">'å•ä½å‡€å€¼'</span>: float(match.group(<span class="number">2</span>)), <span class="string">'ç´¯è®¡å‡€å€¼'</span>: float(match.group(<span class="number">3</span>))&#125;, ignore_index=<span class="literal">True</span>)</span><br><span class="line">    dt.æ—¥æœŸ = pd.to_datetime(dt[<span class="string">'æ—¥æœŸ'</span>])</span><br><span class="line">    dt.index = pd.to_datetime(dt[<span class="string">'æ—¥æœŸ'</span>])</span><br><span class="line">    <span class="keyword">return</span> dt</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ‡è®°ä¹°å…¥å–å‡ºæ—¥æœŸ </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">label</span><span class="params">(df, buy_data, sell_data, title)</span>:</span>     <span class="comment"># date is a list </span></span><br><span class="line">    fig = plt.figure(figsize=(<span class="number">15</span>,<span class="number">6</span>))<span class="comment">#è®¾ç½®ç”»å¸ƒå¤§å°</span></span><br><span class="line">    ax1 = fig.add_subplot(<span class="number">111</span>)</span><br><span class="line">    sns.lineplot(ax=ax1, x=<span class="string">"æ—¥æœŸ"</span>, y=<span class="string">"å•ä½å‡€å€¼"</span>, data=df, color = <span class="string">'gray'</span>)</span><br><span class="line">    <span class="comment"># ç”»æ•£ç‚¹å›¾çš„æ—¶å€™ä¼šæŠ¥é”™ï¼ŒåŠ ä¸ª values å°±è¡Œ</span></span><br><span class="line">    plt.scatter(buy_data.æ—¥æœŸ.values, buy_data.å•ä½å‡€å€¼, s=<span class="number">40</span>, color=<span class="string">'red'</span>,zorder=<span class="number">1</span>)</span><br><span class="line">    plt.scatter(sell_data.æ—¥æœŸ.values, sell_data.å•ä½å‡€å€¼, s=<span class="number">40</span>, color=<span class="string">'green'</span>,zorder=<span class="number">1</span>)</span><br><span class="line">   </span><br><span class="line">    plt.xlabel(<span class="string">u"æ—¥æœŸ"</span>,fontsize=<span class="number">15</span>)<span class="comment">#è®¾ç½®æ¨ªåæ ‡ï¼Œä»¥åŠå­—ä½“å¤§å°</span></span><br><span class="line">    plt.ylabel(<span class="string">u"å•ä½å‡€å€¼"</span>,fontsize=<span class="number">15</span>)<span class="comment">#è®¾ç½®çºµåæ ‡ï¼Œä»¥åŠå­—ä½“å¤§å°</span></span><br><span class="line">    <span class="comment"># è®¾ç½®xyè½´åˆ»åº¦æ–‡å­—å¤§å°</span></span><br><span class="line">    plt.xticks(fontsize=<span class="number">15</span>)</span><br><span class="line">    plt.yticks(fontsize=<span class="number">15</span>)</span><br><span class="line">    plt.title(title, fontdict = &#123;<span class="string">'fontsize'</span> : <span class="number">20</span>&#125;)</span><br><span class="line">    <span class="comment">#plt.legend(fontsize=13)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ 002708 ä¸ºä¾‹</span></span><br><span class="line">df_002708 = get_data(<span class="string">'002708'</span>, <span class="number">100</span>)</span><br><span class="line"><span class="comment"># ä¹°å…¥æ—¥æœŸå’Œå–å‡ºæ—¥æœŸ</span></span><br><span class="line">buy_date = [<span class="string">'2020-11-30'</span>]</span><br><span class="line">sell_date = [<span class="string">'2022-02-11'</span>]</span><br><span class="line">sell_data = df_002708[[<span class="literal">True</span> <span class="keyword">if</span> x.strftime(<span class="string">'%Y-%m-%d'</span>) <span class="keyword">in</span> sell_date <span class="keyword">else</span> <span class="literal">False</span> <span class="keyword">for</span> x <span class="keyword">in</span> list(df_002708.index)]]</span><br><span class="line">buy_data = df_002708[[<span class="literal">True</span> <span class="keyword">if</span> x.strftime(<span class="string">'%Y-%m-%d'</span>) <span class="keyword">in</span> buy_date <span class="keyword">else</span> <span class="literal">False</span> <span class="keyword">for</span> x <span class="keyword">in</span> list(df_002708.index)]]</span><br><span class="line"></span><br><span class="line">label(df_002708, buy_data, sell_data, <span class="string">'å¤§æ‘©å¥åº·äº§ä¸š-002708'</span>)</span><br></pre></td></tr></table></figure>

<p>å‡ºæ¥çš„å›¾å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œè°è¯´æˆ‘æ²¡åè¿‡è¿‡å±±è½¦ğŸ¢ï¼ˆğŸ¶ï¼‰<br>è§æ–‡æœ«é“¾æ¥</p>
<h3 id="å†™åœ¨åè¾¹"><a href="#å†™åœ¨åè¾¹" class="headerlink" title="å†™åœ¨åè¾¹"></a>å†™åœ¨åè¾¹</h3><blockquote>
<p><strong>ä½ å¿…é¡»æœ‰æµ“åšçš„å…´è¶£å»å¼„æ˜ç™½æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…èƒŒåçš„åŸå› ã€‚å¦‚æœä½ èƒ½å¤Ÿé•¿æœŸä¿æŒè¿™ç§å¿ƒæ€ï¼Œä½ å…³æ³¨ç°å®çš„èƒ½åŠ›å°†ä¼šé€æ¸å¾—åˆ°æé«˜</strong>ã€‚å¦‚æœä½ æ²¡æœ‰è¿™ç§å¿ƒæ€ï¼Œé‚£ä¹ˆå³ä½¿ä½ æœ‰å¾ˆé«˜çš„æ™ºå•†ï¼Œä¹Ÿæ³¨å®šä¼šå¤±è´¥ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ä½ è‹¥æƒ³åœ¨ä»»ä½•é¢†åŸŸæ‹¥æœ‰ç«äº‰åŠ›ï¼Œå°±å¿…é¡»ç†Ÿç»ƒåœ°æŒæ¡è¯¥é¢†åŸŸçš„æ–¹æ–¹é¢é¢ï¼Œä¸ç®¡ä½ æ˜¯å¦å–œæ¬¢è¿™ä¹ˆåšï¼Œè¿™æ˜¯äººç±»å¤§è„‘çš„æ·±å±‚ç»“æ„å†³å®šçš„ã€‚</strong></p>
</blockquote>
<p>è·¯è¿‡ï¼šæˆ‘ä¹Ÿä¸è®¤ä¸ºéšéšä¾¿ä¾¿å°±èƒ½åšå¥½äº‹æƒ…â€¦</p>
<h3 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h3><p><a href="https://mp.weixin.qq.com/s?__biz=MzI0NTY3MjY0OA==&tempkey=MTE1Ml9rZDIxZFBMQ2NIVTl5RGVPU01URk10cW1KeGMzYzdqdDk0T3BVOGl5c08xd19qd2U0bFFuQkNoZGl2NllsYm9PUnhmR0Zoa0l0MkRjNzZJcFFhb3FhTXhlOVMtN19fcGNhZUF1aWJ5cnhPQ3B4WGlXX0dKZjdjVlQ4OGZZNDBSYkpfOGJTcE8yU3dhQ1ZtRVNuZEowV0Mxa2twYTRBUDRibXJiV0JRfn4%3D&chksm=694bbdeb5e3c34fdf66af76e3a61142c6b7c8a9166af819e9f88849aee95762a5ce4db1e3068#rd" target="_blank" rel="noopener">è·å–åŸºé‡‘å‡€å€¼ï¼Œæ ‡è®°ä¹°å–ç‚¹</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/30/weixin-sougou/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/30/weixin-sougou/" itemprop="url">ä¸€å¹´å‰çœ‹è¿‡æŸä¸ªå…¬ä¼—å·çš„æŸä¸ªæ–‡ç« ï¼Œä½†æ˜¯æˆ‘å¿˜äº†â€¦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2022-01-30T09:37:19+08:00">
                2022-01-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  505 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  2 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å†™åœ¨å‰è¾¹"><a href="#å†™åœ¨å‰è¾¹" class="headerlink" title="å†™åœ¨å‰è¾¹"></a>å†™åœ¨å‰è¾¹</h3><p>1ï¼‰å…ˆè¯´é—®é¢˜ï¼šå¤§æ¦‚å»å¹´æŸä¸ªæ—¶é—´åœ¨å¾®ä¿¡ä¸Šçœ‹è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œå½“æ—¶å€™è§‰å¾—æœ‰æ„æ€ï¼Œä½†æ˜¯æ²¡æœ‰æ”¶è—ï¼›åªè®°å¾—å‡ ä¸ªå…³é”®å­—ï¼Œæƒ³ç”¨å¾®ä¿¡ç›´æ¥æœï¼Œç»“æœåˆå¤ªå¤šäº†ï¼›å°±â€¦ã€Œæƒ³å¾—å´ä¸å¯å¾—ï¼Œä½ å¥ˆäººç”Ÿä½•ï¼Ÿã€<br>2ï¼‰å¥½åœ¨æœç‹—å¯ä»¥æœå¾®ä¿¡æ–‡ç« ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·ï¼Œå°±æƒ³è¯•ç€ç”¨ç¨‹åºçˆ¬ä¸€ä¸‹ï¼š<br>3ï¼‰ç»“è®ºï¼šæ–¹æ³•æ˜¯æˆåŠŸäº†ï¼Œç»“æœå´æ²¡æœ‰æ‹¿åˆ°ï¼ŒåŸå› åœ¨äºæœç‹—æœç´¢è²Œä¼¼æ²¡æœ‰æ£€ç´¢åˆ°è¿™ç¯‡æ–‡ç« ï¼ˆå¹æ°”ï¼‰ï¼Œå°±ç®€å•è®°å½•ä¸‹çˆ¬å–çš„æ–¹æ³•å§ã€‚</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">import time</span><br><span class="line">import re</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">from selenium import webdriver</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line"># ç™»é™†, ä¸ç„¶åªèƒ½æŸ¥ 10 é¡µçš„æœç´¢ç»“æœ</span><br><span class="line">driver = webdriver.Firefox() # è¿™é‡Œä¸€å®šè¦ç”¨ç«ç‹çš„é©±åŠ¨ï¼Œchrome çš„ç™»é™†åä¼šè¢«è¯†åˆ«... </span><br><span class="line">url = &apos;https://weixin.sogou.com&apos;</span><br><span class="line">driver.get(url)</span><br><span class="line">time.sleep(5)</span><br><span class="line">driver.find_element_by_id(&apos;loginBtn&apos;).click()</span><br><span class="line">time.sleep(10)</span><br><span class="line"></span><br><span class="line"># ç¿»é¡µï¼Œå¹¶ä¸”è·å–æ¯é¡µçš„å…¬ä¼—å·å’Œé“¾æ¥ï¼ˆè²Œä¼¼åªè¿”å› 100 é¡µï¼‰</span><br><span class="line">df = pd.DataFrame(columns = [&apos;name&apos;, &apos;link&apos;])</span><br><span class="line">keyword = &apos;å—äº¬ ä¹°æˆ¿ è§„åˆ’å±€&apos;</span><br><span class="line">for page_number in range(0, sys.maxsize):</span><br><span class="line">    print(page_number)</span><br><span class="line">    time.sleep(10)</span><br><span class="line">    url = &apos;https://weixin.sogou.com/weixin?query=&apos;+keyword+&apos;&amp;s_from=input&amp;_sug_=y&amp;type=2&amp;page=&apos;+str(page_number)+&apos;&amp;ie=utf8&apos;</span><br><span class="line">    driver.get(url)</span><br><span class="line">    soup = BeautifulSoup(driver.page_source, &quot;html.parser&quot;)</span><br><span class="line">    contents = soup.find_all(class_ = &quot;txt-box&quot;)</span><br><span class="line">    for content in contents:</span><br><span class="line">        content_dict = dict()</span><br><span class="line">        link_and_name = content.find_all(&apos;a&apos;)</span><br><span class="line">        link = link_and_name[0][&apos;href&apos;]</span><br><span class="line">        name = link_and_name[1].text</span><br><span class="line">        content_dict[&apos;name&apos;] = name</span><br><span class="line">        content_dict[&apos;link&apos;] = link</span><br><span class="line">        df = df.append(content_dict, ignore_index = True)</span><br><span class="line"></span><br><span class="line"># ç„¶åå»çœ‹æœ‰æ²¡æœ‰è‡ªå·±æƒ³è¦çš„å…¬ä¼—å·ï¼›</span><br></pre></td></tr></table></figure>

<h3 id="å†™åœ¨åè¾¹"><a href="#å†™åœ¨åè¾¹" class="headerlink" title="å†™åœ¨åè¾¹"></a>å†™åœ¨åè¾¹</h3><p>1ï¼‰ä¸Šè¾¹çš„è„šæœ¬è¿˜æ˜¯æœ‰äº›é—®é¢˜ï¼Œæ¯”å¦‚å¦‚æœçŸ­æ—¶é—´ç¿»é¡µå¤ªå¤šï¼Œä¼šè®©ä½ è¾“éªŒè¯ç ï¼›æ‹¿åˆ°çš„é“¾æ¥å…¶å®ä¸æ˜¯çœŸå®å…¬ä¼—å·æ–‡ç« çš„é“¾æ¥ï¼Œéœ€è¦å†åšä¸€ä¸‹å¤„ç†ï¼Œæ—¶é—´å…³ç³»ï¼Œæˆ‘å°±æ²¡æœ‰å®ç°ï¼Œç›¸åº”çš„ä¸€äº›è§£å†³åŠæ³•åœ¨å‚è€ƒé“¾æ¥é‡Œï¼›<br>2ï¼‰çœ‹åˆ°å¥½çš„æ–‡ç« ï¼Œå¥å­å•Šï¼Œè®°å¾—å¹³æ—¶åšå¥½è®°å½•ï¼›</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://blog.csdn.net/m0_46521785/article/details/113776386" target="_blank" rel="noopener">https://blog.csdn.net/m0_46521785/article/details/113776386</a><br><a href="https://www.pythonf.cn/read/129313" target="_blank" rel="noopener">https://www.pythonf.cn/read/129313</a><br><a href="https://segmentfault.com/a/1190000023622107" target="_blank" rel="noopener">https://segmentfault.com/a/1190000023622107</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/27/python-pdf-web/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/27/python-pdf-web/" itemprop="url">Python çˆ¬å–ç½‘é¡µ PDF æ–‡æœ¬</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2022-01-27T20:50:40+08:00">
                2022-01-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  595 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  2 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å†™åœ¨å¼€å¤´"><a href="#å†™åœ¨å¼€å¤´" class="headerlink" title="å†™åœ¨å¼€å¤´"></a>å†™åœ¨å¼€å¤´</h3><p><strong>é—®é¢˜ï¼š</strong>æœ‰æ—¶å€™ä¼šç¢°åˆ°æœ‰æ„æ€çš„ç ”æŠ¥/è®ºæ–‡ï¼Œä¸ºç½‘é¡µ pdf æ–‡æ¡£ï¼Œæƒ³è¦æŠ“å–å…¶ä¸­çš„æŸäº›ä¿¡æ¯ï¼Œ æ‰‹åŠ¨æ‘˜å½•çš„è¯ï¼Œåˆå¤ªæ…¢äº†ï¼›<br>é—®é¢˜å­˜åœ¨çš„å”¯ä¸€æ„ä¹‰å°±æ˜¯ ã€Œè§£å†³å®ƒã€ï¼›<br>ç®€å•è®°å½•ä¸‹ï¼›</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> StringIO, BytesIO</span><br><span class="line"><span class="keyword">from</span> pdfminer.converter <span class="keyword">import</span> TextConverter</span><br><span class="line"><span class="keyword">from</span> pdfminer.pdfinterp <span class="keyword">import</span> PDFPageInterpreter, PDFResourceManager</span><br><span class="line"><span class="keyword">from</span> pdfminer.pdfpage <span class="keyword">import</span> PDFPage</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_score</span><span class="params">(url)</span>:</span></span><br><span class="line">    pdf_content = BytesIO(requests.get(url).content)</span><br><span class="line">    row = dict()</span><br><span class="line">    resource_manager = PDFResourceManager()</span><br><span class="line">    fake_file_handle = StringIO()</span><br><span class="line">    converter = TextConverter(resource_manager, fake_file_handle)   </span><br><span class="line">    page_interpreter = PDFPageInterpreter(resource_manager, converter)</span><br><span class="line">    <span class="comment"># è¿™é‡Œæ˜¯åœ¨ç¿»é¡µ</span></span><br><span class="line">    <span class="keyword">for</span> page <span class="keyword">in</span> PDFPage.get_pages(pdf_content,</span><br><span class="line">                            caching=<span class="literal">True</span>,</span><br><span class="line">                            check_extractable=<span class="literal">True</span>):</span><br><span class="line">        page_interpreter.process_page(page)</span><br><span class="line">        <span class="comment"># æˆ‘è¿™é‡Œåªå–äº†ç¬¬ä¸€é¡µ</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">	  <span class="comment"># è·å–ç¬¬ä¸€é¡µçš„å†…å®¹</span></span><br><span class="line">    text = fake_file_handle.getvalue()</span><br><span class="line">    <span class="comment"># è¿™é‡Œåšæ–‡æœ¬çš„å¤„ç†å³å¯</span></span><br><span class="line">    <span class="keyword">return</span> text</span><br></pre></td></tr></table></figure>

<h3 id="å†™åœ¨ç»“å°¾"><a href="#å†™åœ¨ç»“å°¾" class="headerlink" title="å†™åœ¨ç»“å°¾"></a>å†™åœ¨ç»“å°¾</h3><p>æ‘˜å½•ä¹¦é‡Œçš„ä¸€ä¸ªå°ç‰‡æ®µï¼Œæ¯å¤©å­¦ä¹ ä¸€ç‚¹ç‚¹ï¼š</p>
<blockquote>
<p>å¤§çº¦åœ¨æˆ‘15å²çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…¨å®¶å»å¤ªé˜³è°·æ»‘é›ªï¼›å‡æœŸçš„æœ€åé‚£å¤©ï¼Œçˆ¸çˆ¸å’Œæˆ‘å†’ç€é£é›ªå¼€è½¦å‡ºå»ï¼Œä»–ç»•äº†ååˆ†é’Ÿçš„è·¯å»ç»™æˆ‘ä»¬å¼€çš„é‚£è¾†çº¢è‰²å‰æ™®è½¦åŠ æ²¹ã€‚å½“æ—¶ä»–æ­£äº‰åˆ†å¤ºç§’åœ°è®©æˆ‘ä»¬å…¨å®¶èƒ½èµ¶å¾—ä¸Šå›å®¶çš„é£æœºå‘¢ï¼Œæ‰€ä»¥åˆ°åŠ æ²¹ç«™åå½“æˆ‘å‘ç°æ²¹ç®±é‡Œè¿˜æœ‰åŠç®±æ²¹æ—¶ï¼Œæˆ‘æ„Ÿåˆ°å¾ˆåƒæƒŠã€‚<strong>æˆ‘é—®çˆ¸çˆ¸ï¼Œè¿˜æœ‰é‚£ä¹ˆå¤šæ±½æ²¹ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦åœä¸‹æ¥ï¼›ä»–æ•™å¯¼æˆ‘è¯´ï¼šâ€œæŸ¥ç†ï¼Œä½ è¦æ˜¯å€Ÿäº†åˆ«äººçš„è½¦ï¼Œåˆ«å¿˜äº†åŠ æ»¡æ²¹å†è¿˜ç»™äººå®¶ã€‚â€</strong></p>
<p>æˆ‘åœ¨æ–¯å¦ç¦å¿µå¤§ä¸€æ—¶ï¼Œæœ‰ä¸ªç†ŸäººæŠŠè½¦å€Ÿç»™æˆ‘ã€‚å€’ä¸æ˜¯å› ä¸ºä»–è·Ÿæˆ‘å…³ç³»å¾ˆå¥½ï¼Œè€Œæ˜¯å› ä¸ºä¸€ä¸ªæˆ‘ä»¬éƒ½è®¤è¯†çš„æœ‹å‹è¿«ä½¿ä»–è¿™ä¹ˆåšã€‚é‚£è¾†å¥¥è¿ªä½›å…‹æ–¯æ˜¯çº¢è‰²çš„ï¼Œæ²¹ç®±é‡Œè¿˜æœ‰ä¸€åŠæ²¹ã€‚æ‰€ä»¥æˆ‘æƒ³èµ·äº†å‰æ™®è½¦çš„äº‹ï¼Œå…ˆæŠŠæ²¹åŠ æ»¡äº†ï¼Œå†å°†è½¦è¿˜å›å»ã€‚ä»–å‘ç°äº†ã€‚è‡ªé‚£ä»¥åï¼Œæˆ‘ä»¬å…±åŒåº¦è¿‡äº†å¾ˆå¤šç¾å¥½çš„æ—¶å…‰ï¼Œæˆ‘ç»“å©šçš„æ—¶å€™ï¼Œä»–æ˜¯æˆ‘çš„ä¼´éƒã€‚</p>
<p>ä»æ–¯å¦ç¦æ¯•ä¸šä¹‹åï¼Œæˆ‘æ‰çŸ¥é“å½“å¹´åº¦å‡æ—¶æˆ‘ä»¬ä½çš„æ˜¯ç‘å…‹Â·æ ¼ä¼¦çš„æˆ¿å­ï¼Œå¼€çš„æ˜¯ç‘å…‹Â·æ ¼ä¼¦çš„å‰æ™®ã€‚ç‘å…‹æ˜¯çˆ¸çˆ¸çš„æœ‹å‹ï¼Œå½“ä»–å›åˆ°å¤ªé˜³è°·ï¼Œå°±ç®—å‰æ™®è½¦çš„æ±½æ²¹æ¯”ä»–ç¦»å¼€çš„æ—¶å€™å°‘ï¼Œä»–ä¹Ÿè‡ªç„¶ä¸ä¼šä»‹æ„ï¼Œç”šè‡³å¯èƒ½éƒ½ä¸ä¼šå‘ç°ã€‚ä½†çˆ¸çˆ¸æ— è®ºä»€ä¹ˆäº‹æƒ…éƒ½åšå¾—å…¬å¹³å’Œå‘¨åˆ°ã€‚æ‰€ä»¥é‚£å¤©æˆ‘ä¸ä»…å­¦åˆ°äº†å¦‚ä½•äº¤æœ‹å‹ï¼Œè¿˜å­¦åˆ°äº†å¦‚ä½•ç»´æŠ¤å‹è°Šã€‚</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/24/etf-plot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/24/etf-plot/" itemprop="url">ç”»äº†å‡ ä¸ªETFçš„å›¾</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2022-01-24T01:58:40+08:00">
                2022-01-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  444 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  2 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å†™åœ¨å¼€å¤´"><a href="#å†™åœ¨å¼€å¤´" class="headerlink" title="å†™åœ¨å¼€å¤´"></a>å†™åœ¨å¼€å¤´</h3><p>åšå‡ ä¸ª ETF çš„æ•°æ®ï¼Œè®°å½•ä¸€ä¸‹ï¼›<br>æƒ³å°½é‡å¤ç°è‡ªå·±è§åˆ°çš„ä¸é”™çš„æ•°æ®ï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import requests, json</span><br><span class="line"></span><br><span class="line">def get_price(code, start_date, end_date):</span><br><span class="line">    url = &apos;https://q.stock.sohu.com/hisHq?code=cn_%s&amp;start=%s&amp;end=%s&amp;stat=1&amp;order=D&amp;period=d&amp;callback=historySearchHandler&amp;rt=jsonp&amp;r=0.5903327949924708&amp;0.9198253567636039&apos; % (code, start_date, end_date)</span><br><span class="line">    response = requests.get(url)</span><br><span class="line">    #import pdb; pdb.set_trace()</span><br><span class="line">    json_content = json.loads(response.text.strip(&apos;\n&apos;).strip(&apos;historySearchHandler(&apos;).strip(&apos;)&apos;))[0][&apos;hq&apos;]</span><br><span class="line">    df = pd.DataFrame(columns = &quot;æ—¥æœŸ	å¼€ç›˜	æ”¶ç›˜	æ¶¨è·Œé¢	æ¶¨è·Œå¹…	æœ€ä½	æœ€é«˜	æˆäº¤é‡(æ‰‹)	æˆäº¤é‡‘é¢(ä¸‡)&quot;.split(&quot;\t&quot;))</span><br><span class="line">    for info in json_content:</span><br><span class="line">        column_dict = &#123;&apos;æ—¥æœŸ&apos;: info[0], &apos;å¼€ç›˜&apos;: info[1], &apos;æ”¶ç›˜&apos;: info[2], &apos;æ¶¨è·Œé¢&apos;: info[3], &apos;æ¶¨è·Œå¹…&apos;: info[4], &apos;æœ€ä½&apos;: info[5], &apos;æœ€é«˜&apos;: info[6], &apos;æˆäº¤é‡(æ‰‹)&apos;: info[7], &apos;æˆäº¤é‡‘é¢(ä¸‡)&apos;: info[8]&#125;</span><br><span class="line">        df = df.append(column_dict, ignore_index = True)</span><br><span class="line">    df[&apos;æ—¥æœŸ&apos;] = pd.to_datetime(df[&apos;æ—¥æœŸ&apos;])</span><br><span class="line">    #df.index = pd.to_datetime(df[&apos;æ—¥æœŸ&apos;])</span><br><span class="line">    return df</span><br><span class="line"></span><br><span class="line"># eg</span><br><span class="line">df_513130 = get_price(&apos;513130&apos;, &apos;20190101&apos;, &apos;20220121&apos;)</span><br><span class="line"></span><br><span class="line"># ç„¶åç”»å›¾</span><br></pre></td></tr></table></figure>

<h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p><strong>2021å¹´ä»¥æ¥</strong><br>è§å‚è€ƒé“¾æ¥</p>
<p><strong>å…¨éƒ¨æ—¶é—´</strong><br>è§å‚è€ƒé“¾æ¥</p>
<h3 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h3><p>æ‘˜å½•ä»Šå¤©ä¹¦é‡Œçœ‹åˆ°ä¸€å¥è¯</p>
<blockquote>
<p><strong>è¿æ°”å’Œäº¤æ˜“æœ‰å…³å—ï¼Ÿ</strong><br>äº¤æ˜“å’Œå…¶ä»–ä»»ä½•å·¥ä½œä¸€æ ·ã€‚ä½ åˆ»è‹¦åŠªåŠ›ï¼Œä»˜å‡ºæ—¶é—´å’Œç²¾åŠ›ï¼Œä½ çš„è¿æ°”è‡ªç„¶å°±æ¥äº†ã€‚æˆ‘åœ¨é¦–ç¬”100æ‰‹äº¤æ˜“ä¸­éå¸¸å¹¸è¿åœ°æˆä¸ºèµ¢å®¶ï¼Œä½†æˆ‘ä¸ºä»€ä¹ˆä¼šæœ‰å¥½è¿å‘¢ï¼Ÿå› ä¸ºä¹‹å‰æˆ‘èƒ½ä¸€æ•´å¤©ç«™åœ¨äº¤æ˜“æ‰€å†…ï¼Œä¸æ–­è§‚å¯Ÿå­¦ä¹ ï¼Œå…­ä¸ªå¤šæœˆå¤©å¤©å¦‚æ­¤ï¼Œä»è€Œå½¢æˆå’Œæå‡äº†æˆ‘çš„å¸‚åœºæ„Ÿè§‰ã€‚æœºä¼šä¸€æ—¦æ¥ä¸´ï¼Œæˆ‘å°±ä¸ä¼šè¿Ÿç–‘ï¼Œèƒ½ç«‹åˆ»æŠŠæ¡ã€‚æœºä¼šå’Œè¿æ°”åªç•™ç»™æœ‰å‡†å¤‡çš„äººã€‚</p>
</blockquote>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://mp.weixin.qq.com/s/pUBfuXdX_GQ-yXJxMPp6TA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/pUBfuXdX_GQ-yXJxMPp6TA</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/16/tdx-to-python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/16/tdx-to-python/" itemprop="url">æœ‹å‹è¯´ä»–æœ‰ä¸ªè‡´å¯Œå…¬å¼â€¦ è®©æˆ‘ç»™çœ‹çœ‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2022-01-16T10:35:26+08:00">
                2022-01-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  731 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  3 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å†™åœ¨å¼€å¤´"><a href="#å†™åœ¨å¼€å¤´" class="headerlink" title="å†™åœ¨å¼€å¤´"></a>å†™åœ¨å¼€å¤´</h3><p>ä¸»è¦å®ç°çš„ä¸œè¥¿æ˜¯ï¼š<br>1ï¼‰æœ‹å‹ç»™äº†ä¸ªé€šè¾¾ä¿¡å…¬å¼ï¼Œæƒ³çœ‹èƒ½ä¸èƒ½è‡´å¯Œï¼›<br>2ï¼‰æ‰‹åŠ¨å»æ‰§è¡Œé€‰è‚¡è‚‰çœ¼è§‚å¯Ÿï¼Œæ•ˆæœè¿˜è¡Œï¼›<br>3ï¼‰æœ‰æ–‡åŒ–çš„æˆ‘ä»¬çŸ¥é“åªå‡­è‚‰çœ¼çœ‹è‚¯å®šä¸é è°±ï¼Œå°±æƒ³å›æµ‹çœ‹çœ‹æ•ˆæœï¼Œå°±å»æµ‹äº†ï¼›</p>
<p>æ¶‰åŠçŸ¥è¯†ç‚¹ï¼šé€šè¾¾ä¿¡çš„å…¬å¼ç¼–è¾‘ï¼Œé€‰è‚¡ï¼Œä»¥åŠbigquantä¸Šçš„å›æµ‹</p>
<h3 id="é€šè¾¾ä¿¡çœ‹æ•ˆæœè²Œä¼¼è¿˜è¡Œ"><a href="#é€šè¾¾ä¿¡çœ‹æ•ˆæœè²Œä¼¼è¿˜è¡Œ" class="headerlink" title="é€šè¾¾ä¿¡çœ‹æ•ˆæœè²Œä¼¼è¿˜è¡Œ"></a>é€šè¾¾ä¿¡çœ‹æ•ˆæœè²Œä¼¼è¿˜è¡Œ</h3><p>é€‰è‚¡å…¬å¼æ˜¯è¿™æ ·å­çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DIFF:=EMA(CLOSE,12) - EMA(CLOSE,26);</span><br><span class="line">DEA:= EMA(DIFF,9);</span><br><span class="line">MACD:= 2*(DIFF-DEA);</span><br><span class="line">REF(C&lt;=O,2) AND REF(H&lt;REF(H,1) AND L&lt;REF(L,1),1) AND L&gt;REF(L,1) AND C&gt;O AND C&gt;REF(H,2) AND REF(EVERY(C/REF(C,1)&lt;1,3),3) AND DIFF&gt;0 AND DEA&gt;0;</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€é€šè¾¾ä¿¡ï¼ŒCtrl + F , æ¡ä»¶é€‰è‚¡ï¼Œ æ–°å»ºå…¬å¼<br>æŠŠè¿™ä¸ªå…¬å¼ç²˜è´´è¿›å»ï¼Œ æµ‹è¯•å…¬å¼ï¼Œ ä¿å­˜<br>[å›¾ç‰‡è§æ–‡æœ«å‚è€ƒé“¾æ¥]</p>
<p>Ctrl  T,  é€‰æ‹©åˆšå»ºå¥½çš„å…¬å¼ï¼Œæ‰§è¡Œé€‰è‚¡ï¼Œå¤šè¯•å‡ ä¸ªæ—¥æœŸï¼Œå‘ç°ï¼Œå“å‘¦ä¸é”™ï¼›<br>[å›¾ç‰‡è§æ–‡æœ«å‚è€ƒé“¾æ¥]</p>
<h3 id="é‚£ä¹ˆå›æµ‹è¯•è¯•å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆå›æµ‹è¯•è¯•å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆå›æµ‹è¯•è¯•å‘¢ï¼Ÿ"></a>é‚£ä¹ˆå›æµ‹è¯•è¯•å‘¢ï¼Ÿ</h3><p>é¦–å…ˆéœ€è¦å°†é€šè¾¾ä¿¡å…¬å¼è¯­è¨€è½¬åŒ–æˆ python è¯­è¨€ï¼›<br>å›æµ‹å¹³å°é€‰çš„æ˜¯ bigquant, å› ä¸ºæˆ‘è‡ªå·±ç›¸å¯¹æ¯”è¾ƒç†Ÿï¼›<br>ç¿»è¯‘çš„è¿‡ç¨‹ä¸­è¦æ˜¯æœ‰ä¸æ‡‚çš„è¯­å¥ï¼Œç½‘ä¸ŠæŸ¥ä¸‹ï¼ˆæ–‡æœ«é™„é“¾æ¥ï¼‰ï¼›<br>ç„¶åæ ¸å¯¹çš„æ—¶å€™çœ‹é€‰å‡ºçš„è‚¡ç¥¨èƒ½ä¸èƒ½å¯¹ä¸Šï¼Œå°±èƒ½çŸ¥é“æœ‰æ²¡æœ‰è½¬åŒ–æ­£ç¡®ï¼›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># é€šè¾¾ä¿¡å…¬å¼</span><br><span class="line">DIFF:=EMA(CLOSE,12) - EMA(CLOSE,26);</span><br><span class="line">DEA:= EMA(DIFF,9);</span><br><span class="line">MACD:= 2*(DIFF-DEA);</span><br><span class="line">REF(C&lt;=O,2) AND REF(H&lt;REF(H,1) AND L&lt;REF(L,1),1) AND L&gt;REF(L,1) AND C&gt;O AND C&gt;REF(H,2) AND REF(EVERY(C/REF(C,1)&lt;1,3),3) AND DIFF&gt;0 AND DEA&gt;0;</span><br><span class="line"></span><br><span class="line"># python</span><br><span class="line">x.close_2 &lt;= x.open_2 and (x.high_1 &lt; x.high_2 and x.low_1 &lt; x.low_2) and x.low_0 &gt; x.low_1 and x.close_0 &gt; x.open_0 and x.close_0 &gt; x.high_2 and x.close_5 &lt; x.close_6 and x.close_4 &lt; x.close_5 and x.close_3 &lt; x.close_4 and (x.dif &gt; 0 and x.dea &gt;0)</span><br></pre></td></tr></table></figure>

<p><strong>Bigquant å®ç°</strong><br>Bigquantæœ€åå®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼Œä¸‹è¾¹æŒ‘é‡ç‚¹çš„æˆªå›¾ç®€å•è¯´ä¸€ä¸‹<br>[å›¾ç‰‡è§æ–‡æœ«å‚è€ƒé“¾æ¥]</p>
<p>1ï¼‰ç‰¹å¾åˆ—è¡¨ï¼Œéœ€è¦æŠŠå…¬å¼é‡Œæ¶‰åŠçš„ç‰¹å¾éƒ½ä½“ç°åœ¨ç‰¹å¾åˆ—è¡¨é‡Œè¾¹<br>[å›¾ç‰‡è§æ–‡æœ«å‚è€ƒé“¾æ¥]<br>2ï¼‰è‡ªå®šä¹‰pythonæ¨¡å—ä¸­ç”Ÿæˆä¸€ä¸‹ä¿¡å·<br>[å›¾ç‰‡è§æ–‡æœ«å‚è€ƒé“¾æ¥]<br>3ï¼‰å›æµ‹å‡½æ•°ä¸­å®šä¹‰å¥½è‡ªå·±çš„å›æµ‹é€»è¾‘å°±å¯ä»¥å›æµ‹äº†</p>
<p><strong>å›æµ‹ç»“æœ</strong><br>[å›¾ç‰‡è§æ–‡æœ«å‚è€ƒé“¾æ¥]</p>
<h3 id="å†™åœ¨åè¾¹"><a href="#å†™åœ¨åè¾¹" class="headerlink" title="å†™åœ¨åè¾¹"></a>å†™åœ¨åè¾¹</h3><p>çœŸæ­£èƒ½æ‹¿åˆ°è´¢å¯Œä»£ç çš„å…¬å¼è‚¯å®šä¸ä¼šè¿™ä¹ˆç®€å•ï¼Œè¿™ç¯‡åªæ˜¯æ–¹æ³•çš„è®°å½•æ–‡ç« ç½¢äº†ï¼›<br>è½¬åŒ–å…¬å¼çš„æ—¶å€™å‘ç°è²Œä¼¼æ²¡æœ‰é€šè¾¾ä¿¡å…¬å¼-&gt; pythonè¯­è¨€çš„ç°æˆå·¥å…·ï¼Œæ„Ÿè§‰å¯ä»¥åšä¸€ä¸ªï¼›</p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p>é€šè¾¾ä¿¡å…¬å¼<br><a href="https://www.agudashi.cn/doc/5bffb706e7de95c78c41dd3c.html" target="_blank" rel="noopener">https://www.agudashi.cn/doc/5bffb706e7de95c78c41dd3c.html</a><br>å…¬ä¼—å·æ–‡ç« é“¾æ¥<br><a href="https://mp.weixin.qq.com/s?__biz=MzI0NTY3MjY0OA==&mid=2247483958&idx=1&sn=aa7b875e3a31dbbdc146fd73a776b856&chksm=e94bbd91de3c3487b3dbc769890c90a6284b5607b400716c068032e86d32585829ee572c0a6f&token=1620949572&lang=zh_CN#rd" target="_blank" rel="noopener">æœ‹å‹è¯´ä»–æœ‰ä¸ªè‡´å¯Œå…¬å¼â€¦ è®©æˆ‘ç»™çœ‹çœ‹</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/15/xueqiu-performance-accum-rate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/15/xueqiu-performance-accum-rate/" itemprop="url">é›ªçƒæ¨¡æ‹Ÿç»„åˆæ”¶ç›Šç‡çˆ¬å–</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2022-01-15T10:33:56+08:00">
                2022-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  559 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  2 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å®ç°çš„åŠŸèƒ½ï¼š"><a href="#å®ç°çš„åŠŸèƒ½ï¼š" class="headerlink" title="å®ç°çš„åŠŸèƒ½ï¼š"></a>å®ç°çš„åŠŸèƒ½ï¼š</h3><p>1ï¼‰çˆ¬å–é›ªçƒç»„åˆå…­ä¸ªæœˆä»¥å†…ï¼Œæ¯å¤©çš„ç´¯ç§¯æ”¶ç›Šç‡å€¼ï¼ˆæ—¶é—´æ¯”å…­ä¸ªæœˆé•¿å°±ä¸ç»™æä¾›æ¯å¤©çš„ç´¯ç§¯æ”¶ç›Šç‡äº†ï¼‰ï¼›<br>2ï¼‰æ¯å¤©æ”¶ç›˜åçˆ¬å–å½“å¤©çš„ç´¯ç§¯æ”¶ç›Šç‡ï¼›<br>3ï¼‰å»¶ä¼¸ 1ï¼šæŠŠä¸Šè¾¹ä¸¤ç‚¹åŠ èµ·æ¥å°±èƒ½ä¸€ç›´è·Ÿè¸ªç»„åˆçš„æ”¶ç›Šç‡äº†ï¼›<br>4ï¼‰å»¶ä¼¸ 2ï¼šè®¾ç½®å®šæ—¶è„šæœ¬ï¼Œå†™ç¨‹åºå®šæ—¶æ‰§è¡Œä¸Šè¾¹çš„ä¸‰ä¸ªæ­¥éª¤ï¼Œå°±å¯ä»¥æ¯å¤©åªçœ‹ä¸€çœ¼ï¼Œæ—¶é—´å˜å¾—ç®€å•ä¸€ç‚¹ç‚¹ï¼›</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests,json</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å…­ä¸ªæœˆå†…çš„æ¯å¤©ç´¯è®¡æ”¶ç›Šç‡</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_return_rate_six_month</span><span class="params">(gid, cookie)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'authority'</span>: <span class="string">'tc.xueqiu.com'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua'</span>: <span class="string">'" Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"'</span>,</span><br><span class="line">        <span class="string">'accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua-mobile'</span>: <span class="string">'?0'</span>,</span><br><span class="line">        <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua-platform'</span>: <span class="string">'"Windows"'</span>,</span><br><span class="line">        <span class="string">'origin'</span>: <span class="string">'https://xueqiu.com'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-site'</span>: <span class="string">'same-site'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-mode'</span>: <span class="string">'cors'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-dest'</span>: <span class="string">'empty'</span>,</span><br><span class="line">        <span class="string">'referer'</span>: <span class="string">'https://xueqiu.com/performance'</span>,</span><br><span class="line">        <span class="string">'accept-language'</span>: <span class="string">'zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7'</span>,</span><br><span class="line">        <span class="string">'cookie'</span>: cookie,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    params = ( </span><br><span class="line">        (<span class="string">'gid'</span>, gid),  </span><br><span class="line">        (<span class="string">'period'</span>, <span class="string">'6m'</span>), <span class="comment"># æ¯æ¬¡å–æœ€å¤§å°±è¡Œ, æ—¶é—´å†é•¿ä¸ç»™è¿”å›æ¯å¤©çš„ç´¯è®¡æ”¶ç›Šç‡...</span></span><br><span class="line">        (<span class="string">'market'</span>, <span class="string">'ALL'</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    response = requests.get(<span class="string">'https://tc.xueqiu.com/tc/snowx/MONI/forchart/roa.json'</span>, headers=headers, params=params)</span><br><span class="line">    content = json.loads(response.text)</span><br><span class="line">    <span class="keyword">return</span> content[<span class="string">'result_data'</span>][<span class="string">'list'</span>]</span><br><span class="line"></span><br><span class="line">res= pd.DataFrame()</span><br><span class="line">gid = <span class="string">'your gid'</span></span><br><span class="line">cookie = <span class="string">'your cookies'</span></span><br><span class="line">data = get_return_rate(gid)</span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> data:</span><br><span class="line">    value_dict = dict()</span><br><span class="line">    value_dict[<span class="string">'return_rate'</span>] = element[<span class="string">'value'</span>]</span><br><span class="line">    value_dict[<span class="string">'date'</span>] = element[<span class="string">'date'</span>]  </span><br><span class="line">    res= ers.append(value_dict, ignore_index = <span class="literal">True</span>)</span><br><span class="line">res.head()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ¯å¤©çš„ç´¯ç§¯æ”¶ç›Šç‡</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_accum_rate_each_day</span><span class="params">(gid, cookie)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">'authority'</span>: <span class="string">'tc.xueqiu.com'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua'</span>: <span class="string">'" Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"'</span>,</span><br><span class="line">        <span class="string">'accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua-mobile'</span>: <span class="string">'?0'</span>,</span><br><span class="line">        <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36'</span>,</span><br><span class="line">        <span class="string">'sec-ch-ua-platform'</span>: <span class="string">'"Windows"'</span>,</span><br><span class="line">        <span class="string">'origin'</span>: <span class="string">'https://xueqiu.com'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-site'</span>: <span class="string">'same-site'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-mode'</span>: <span class="string">'cors'</span>,</span><br><span class="line">        <span class="string">'sec-fetch-dest'</span>: <span class="string">'empty'</span>,</span><br><span class="line">        <span class="string">'referer'</span>: <span class="string">'https://xueqiu.com/performance'</span>,</span><br><span class="line">        <span class="string">'accept-language'</span>: <span class="string">'zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7'</span>,</span><br><span class="line">        <span class="string">'cookie'</span>: cookie,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    params = (</span><br><span class="line">        (<span class="string">'gid'</span>, gid),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    response = requests.get(<span class="string">'https://tc.xueqiu.com/tc/snowx//MONI/performances.json'</span>, headers=headers, params=params)</span><br><span class="line"></span><br><span class="line">    response.encoding = <span class="string">"utf-8"</span></span><br><span class="line">    content = json.loads(response.text)</span><br><span class="line">    <span class="keyword">if</span> content[<span class="string">'msg'</span>] == <span class="string">'è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œå¹¶é‡è¯•'</span>:</span><br><span class="line">        print(<span class="string">"è¯·æ±‚é”™è¯¯...éœ€è¦æ›´æ–° cookies... "</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    accum_rate = content[<span class="string">'result_data'</span>][<span class="string">'performances'</span>][<span class="number">1</span>][<span class="string">'accum_rate'</span>]</span><br><span class="line">    <span class="keyword">return</span> accum_rate</span><br><span class="line"></span><br><span class="line">value = get_accum_rate_each_day(gid, cookie)</span><br></pre></td></tr></table></figure>

<h3 id="è¡¥å……é˜…è¯»"><a href="#è¡¥å……é˜…è¯»" class="headerlink" title="è¡¥å……é˜…è¯»"></a>è¡¥å……é˜…è¯»</h3><p>windows å®šæ—¶è„šæœ¬è®¾ç½®<br><a href="https://www.cnblogs.com/sui776265233/p/13602893.html" target="_blank" rel="noopener">https://www.cnblogs.com/sui776265233/p/13602893.html</a><br>linux å®šæ—¶è„šæœ¬è®¾ç½®<br><a href="https://www.jianshu.com/p/d93e2b177814" target="_blank" rel="noopener">https://www.jianshu.com/p/d93e2b177814</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2022/01/11/xueqiu-performancev1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/01/11/xueqiu-performancev1/" itemprop="url">é›ªçƒæ¨¡æ‹Ÿç»„åˆæŸ¥è¯¢å’Œäº¤æ˜“è„šæœ¬-python</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2022-01-11T08:21:59+08:00">
                2022-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  422 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  2 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Talk-cheap-show-code"><a href="#Talk-cheap-show-code" class="headerlink" title="Talk cheap, show code"></a>Talk cheap, show code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å‰éœ€è¦æ›¿æ¢ cookie å’Œ ç»„åˆ id, æ€ä¹ˆæ‰¾è§ä¸‹è¾¹æˆªå›¾/é“¾æ¥</span></span><br><span class="line">cookie = your_cookies</span><br><span class="line">group_id = yout_group_id</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒä»“æŸ¥è¯¢å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hold_stock</span><span class="params">()</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        â€˜authorityâ€™: â€˜tc.xueqiu.comâ€™,</span><br><span class="line">        â€˜sec-ch-uaâ€™: â€˜â€ Not A;Brandâ€;v=â€œ<span class="number">99</span>â€, â€œChromiumâ€;v=â€œ<span class="number">96</span>â€, â€œGoogle Chromeâ€;v=â€œ<span class="number">96</span>â€â€™,</span><br><span class="line">        â€˜acceptâ€™: â€˜application/json, text/plain, */*â€™,</span><br><span class="line">    <span class="comment">#    â€˜acceptâ€™: â€˜application/json, charset=UTF-8â€™,</span></span><br><span class="line">        â€˜sec-ch-ua-mobileâ€™: â€˜?0â€™,</span><br><span class="line">        â€˜user-agentâ€™: â€˜Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">6.1</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">96.0</span><span class="number">.4664</span><span class="number">.45</span> Safari/<span class="number">537.36</span>â€™,</span><br><span class="line">        â€˜sec-ch-ua-platformâ€™: â€˜â€Windowsâ€â€™,</span><br><span class="line">        â€˜originâ€™: â€˜https://xueqiu.comâ€™,</span><br><span class="line">        â€˜sec-fetch-siteâ€™: â€˜same-siteâ€™,</span><br><span class="line">        â€˜sec-fetch-modeâ€™: â€˜corsâ€™,</span><br><span class="line">        â€˜sec-fetch-destâ€™: â€˜emptyâ€™,</span><br><span class="line">        â€˜refererâ€™: â€˜https://xueqiu.com/performanceâ€™,</span><br><span class="line">        â€˜accept-languageâ€™: â€˜zh-CN,zh;q=<span class="number">0.9</span>,en;q=<span class="number">0.8</span>,zh-TW;q=<span class="number">0.7</span>â€™,</span><br><span class="line">        â€˜cookieâ€™: cookie,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    params = (</span><br><span class="line">        (â€˜gidâ€™, group_id),</span><br><span class="line">    )</span><br><span class="line">    response = requests.get(â€˜https://tc.xueqiu.com/tc/snowx//MONI/performances.jsonâ€™, headers=headers, params=params)</span><br><span class="line">    response.encoding = â€œutf<span class="number">-8</span>â€</span><br><span class="line">    content = json.loads(response.text)</span><br><span class="line">    res_stock = content[â€˜result_dataâ€™][â€˜performancesâ€™][<span class="number">1</span>][â€˜listâ€™]</span><br><span class="line">    res_asset = content[â€˜result_dataâ€™][â€˜performancesâ€™][<span class="number">1</span>][â€˜assetsâ€™]</span><br><span class="line">    <span class="keyword">return</span> res_asset, res_stock</span><br><span class="line"></span><br><span class="line"><span class="comment"># äº¤æ˜“å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">trade</span><span class="params">(direction, date, comment, stock_code, price, shares, tax_rate)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        â€˜authorityâ€™: â€˜tc.xueqiu.comâ€™,</span><br><span class="line">        â€˜sec-ch-uaâ€™: â€˜â€ Not A;Brandâ€;v=â€œ<span class="number">99</span>â€, â€œChromiumâ€;v=â€œ<span class="number">96</span>â€, â€œGoogle Chromeâ€;v=â€œ<span class="number">96</span>â€â€™,</span><br><span class="line">        â€˜acceptâ€™: â€˜application/json, text/plain, */*â€™,</span><br><span class="line">        â€˜content-typeâ€™: â€˜application/x-www-form-urlencodedâ€™,</span><br><span class="line">        â€˜sec-ch-ua-mobileâ€™: â€˜?0â€™,</span><br><span class="line">        â€˜user-agentâ€™: â€˜Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">6.1</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">96.0</span><span class="number">.4664</span><span class="number">.45</span> Safari/<span class="number">537.36</span>â€™,</span><br><span class="line">        â€˜sec-ch-ua-platformâ€™: â€˜â€Windowsâ€â€™,</span><br><span class="line">        â€˜originâ€™: â€˜https://xueqiu.comâ€™,</span><br><span class="line">        â€˜sec-fetch-siteâ€™: â€˜same-siteâ€™,</span><br><span class="line">        â€˜sec-fetch-modeâ€™: â€˜corsâ€™,</span><br><span class="line">        â€˜sec-fetch-destâ€™: â€˜emptyâ€™,</span><br><span class="line">        â€˜refererâ€™: â€˜https://xueqiu.com/performanceâ€™,</span><br><span class="line">        â€˜accept-languageâ€™: â€˜zh-CN,zh;q=<span class="number">0.9</span>,en;q=<span class="number">0.8</span>,zh-TW;q=<span class="number">0.7</span>â€™,</span><br><span class="line">        â€˜cookieâ€™: cookie,</span><br><span class="line">    &#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">      â€˜typeâ€™: direction, <span class="comment"># 1 æ˜¯ä¹° 2 æ˜¯å–</span></span><br><span class="line">      â€˜dateâ€™: date,</span><br><span class="line">      â€˜commentâ€™: comment, <span class="comment"># å¤‡æ³¨</span></span><br><span class="line">      â€˜gidâ€™: group_id,</span><br><span class="line">      â€˜symbolâ€™: stock_code,</span><br><span class="line">      â€˜priceâ€™: price,</span><br><span class="line">      â€˜sharesâ€™: shares,</span><br><span class="line">      â€˜tax_rateâ€™: tax_rate, <span class="comment"># å–æ˜¯åƒä¸€, ä¹°æ˜¯ 0</span></span><br><span class="line">      â€˜commission_rateâ€™: â€˜<span class="number">0.1</span>â€™, <span class="comment"># ä¹°å–éƒ½æ˜¯ä¸‡ä¸€</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.post(â€˜https://tc.xueqiu.com/tc/snowx/MONI/transaction/add.jsonâ€™, headers=headers, data=data)</span><br></pre></td></tr></table></figure>

<h2 id="å†™åœ¨åè¾¹"><a href="#å†™åœ¨åè¾¹" class="headerlink" title="å†™åœ¨åè¾¹"></a>å†™åœ¨åè¾¹</h2><p>æ—¶é—´å°‘ï¼Œè¦åšçš„äº‹æƒ…æœ‰å¾ˆå¤šï¼Œå¸Œæœ›èƒ½é è°±ï¼Œåšäº‹ï¼Œå°±ä¸åºŸè¯äº†â€¦</p>
<h2 id="å…¬ä¼—å·é“¾æ¥ï¼ˆè´´å›¾ï¼‰"><a href="#å…¬ä¼—å·é“¾æ¥ï¼ˆè´´å›¾ï¼‰" class="headerlink" title="å…¬ä¼—å·é“¾æ¥ï¼ˆè´´å›¾ï¼‰"></a>å…¬ä¼—å·é“¾æ¥ï¼ˆè´´å›¾ï¼‰</h2><p><a href="https://mp.weixin.qq.com/s?__biz=MzI0NTY3MjY0OA==&mid=2247483943&idx=1&sn=f0095ba9f133f9805bfcffe3b97f61c9&chksm=e94bbd80de3c3496948fe638bc832f0ff359a281362b47c23e26320f46a47ea2e951459fe7ea&token=2018691164&lang=zh_CN#rd" target="_blank" rel="noopener">é›ªçƒæ¨¡æ‹Ÿç»„åˆæŸ¥è¯¢å’Œäº¤æ˜“è„šæœ¬-python</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/12/15/xueqiu-performance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/12/15/xueqiu-performance/" itemprop="url">é›ªçƒæ¨¡æ‹Ÿç›˜è„šæœ¬åŒ–è°ƒä»“</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-12-15T21:38:26+08:00">
                2021-12-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  540 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  2 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="ä¸ºå•¥å¹²è¿™ä¸ªï¼Ÿ"><a href="#ä¸ºå•¥å¹²è¿™ä¸ªï¼Ÿ" class="headerlink" title="ä¸ºå•¥å¹²è¿™ä¸ªï¼Ÿ"></a>ä¸ºå•¥å¹²è¿™ä¸ªï¼Ÿ</h3><p>å·¥ä½œå’Œä¸ªäººéœ€è¦ï¼ŒåŸºäºé›ªçƒæ¨¡æ‹Ÿç»„åˆå®ç°è‡ªåŠ¨åŒ–çš„è‚¡ç¥¨è°ƒä»“ï¼Œä¸»è¦åˆ†å‡ æ­¥ï¼š<br>1ï¼‰ç™»å½•é›ªçƒï¼Œåˆ›å»ºæ¨¡æ‹Ÿç»„åˆï¼Œæ‰‹åŠ¨æ·»åŠ è‚¡ç¥¨ï¼Œè·å–å¡«å†™çš„ cURLï¼›<br>2) è½¬åŒ–ä¸º python çš„ post  è¯·æ±‚ï¼›<br>3ï¼‰è¿è¡Œç¨‹åºï¼Œæ£€æŸ¥ç»“æœå³å¯ï¼›</p>
<h3 id="å’‹å¹²ï¼Ÿ"><a href="#å’‹å¹²ï¼Ÿ" class="headerlink" title="å’‹å¹²ï¼Ÿ"></a>å’‹å¹²ï¼Ÿ</h3><p>1ï¼‰åˆ›å»ºç»„åˆ<br>å›¾è§å…¬ä¼—å·é“¾æ¥ï¼Œä¸‹åŒ<br>2ï¼‰æ‰‹åŠ¨æ·»åŠ è‚¡ç¥¨<br>3ï¼‰å¼€å‘è€…å·¥å…·ï¼Œæ‰¾åˆ°æ·»åŠ è‚¡ç¥¨çš„è¯·æ±‚<br>4ï¼‰è·å– cURL</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">curl 'https://tc.xueqiu.com/tc/snowx/MONI/transaction/add.json' \</span><br><span class="line">  -H 'authority: tc.xueqiu.com' \</span><br><span class="line">  -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"' \</span><br><span class="line">  -H 'accept: application/json, text/plain, */*' \</span><br><span class="line">  -H 'content-type: application/x-www-form-urlencoded' \</span><br><span class="line">  -H 'sec-ch-ua-mobile: ?0' \</span><br><span class="line">  -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36' \</span><br><span class="line">  -H 'sec-ch-ua-platform: "macOS"' \</span><br><span class="line">  -H 'origin: https://xueqiu.com' \</span><br><span class="line">  -H 'sec-fetch-site: same-site' \</span><br><span class="line">  -H 'sec-fetch-mode: cors' \</span><br><span class="line">  -H 'sec-fetch-dest: empty' \</span><br><span class="line">  -H 'referer: https://xueqiu.com/performance' \</span><br><span class="line">  -H 'accept-language: zh-CN,zh;q=0.9,en;q=0.8,ja;q=0.7,zh-TW;q=0.6' \</span><br><span class="line">  -H 'cookie: your cookie here' \</span><br><span class="line">  --data-raw 'type=1&amp;date=2021-12-15&amp;gid=4383054580870984&amp;symbol=SZ002157&amp;price=9.49&amp;shares=100&amp;commission_rate=0.1' \</span><br><span class="line">  --compressed</span><br></pre></td></tr></table></figure>

<p>5ï¼‰è½¬åŒ–pythonçš„æ ¼å¼<br><a href="https://tool.lu/curl/" target="_blank" rel="noopener">https://tool.lu/curl/</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'authority'</span>: <span class="string">'tc.xueqiu.com'</span>,</span><br><span class="line">    <span class="string">'sec-ch-ua'</span>: <span class="string">'" Not A;Brand";v="99", "Chromium";v="96", "Google Chrome";v="96"'</span>,</span><br><span class="line">    <span class="string">'accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">    <span class="string">'content-type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>,</span><br><span class="line">    <span class="string">'sec-ch-ua-mobile'</span>: <span class="string">'?0'</span>,</span><br><span class="line">    <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36'</span>,</span><br><span class="line">    <span class="string">'sec-ch-ua-platform'</span>: <span class="string">'"macOS"'</span>,</span><br><span class="line">    <span class="string">'origin'</span>: <span class="string">'https://xueqiu.com'</span>,</span><br><span class="line">    <span class="string">'sec-fetch-site'</span>: <span class="string">'same-site'</span>,</span><br><span class="line">    <span class="string">'sec-fetch-mode'</span>: <span class="string">'cors'</span>,</span><br><span class="line">    <span class="string">'sec-fetch-dest'</span>: <span class="string">'empty'</span>,</span><br><span class="line">    <span class="string">'referer'</span>: <span class="string">'https://xueqiu.com/performance'</span>,</span><br><span class="line">    <span class="string">'accept-language'</span>: <span class="string">'zh-CN,zh;q=0.9,en;q=0.8,ja;q=0.7,zh-TW;q=0.6'</span>,</span><br><span class="line">    <span class="string">'cookie'</span>: <span class="string">'your cookie here'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">  <span class="string">'type'</span>: <span class="string">'1'</span>, <span class="comment"># 1æ˜¯ä¹°ï¼Œ2æ˜¯å–</span></span><br><span class="line">  <span class="string">'date'</span>: <span class="string">'2021-12-15'</span>,</span><br><span class="line">  <span class="string">'gid'</span>: <span class="string">'4383054580870984'</span>,</span><br><span class="line">  <span class="string">'symbol'</span>: <span class="string">'SZ002714'</span>,</span><br><span class="line">  <span class="string">'price'</span>: <span class="string">'9.49'</span>,</span><br><span class="line">  <span class="string">'shares'</span>: <span class="string">'100'</span>,</span><br><span class="line">  <span class="string">'tax_rate'</span>: <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">'commission_rate'</span>: <span class="string">'0.1'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.post(<span class="string">'https://tc.xueqiu.com/tc/snowx/MONI/transaction/add.json'</span>, headers=headers, data=data)</span><br></pre></td></tr></table></figure>

<p>æ‰¹é‡å¤„ç†çš„æ—¶å€™ï¼Œåªéœ€è¦è„šæœ¬å¤„ç† data çš„å­—å…¸å†…å®¹å³å¯ï¼Œå¤ªç®€å•äº†ï¼Œä¸å±•å¼€è¯´ï¼›</p>
<h3 id="æ³¨æ„çš„ç‚¹"><a href="#æ³¨æ„çš„ç‚¹" class="headerlink" title="æ³¨æ„çš„ç‚¹"></a>æ³¨æ„çš„ç‚¹</h3><p>1ï¼‰cookies ä¸€æ®µæ—¶é—´å¯èƒ½å¤±æ•ˆï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ–°ä¸‹ï¼›<br>2ï¼‰åŸºé‡‘ï¼Œetf éƒ½å¯ä»¥ï¼›</p>
<h3 id="åƒæ°´ä¸å¿˜æŒ–äº•äºº"><a href="#åƒæ°´ä¸å¿˜æŒ–äº•äºº" class="headerlink" title="åƒæ°´ä¸å¿˜æŒ–äº•äºº"></a>åƒæ°´ä¸å¿˜æŒ–äº•äºº</h3><p><a href="https://github.com/yyri/stockScripts" target="_blank" rel="noopener">https://github.com/yyri/stockScripts</a></p>
<h3 id="å…¬ä¼—å·é“¾æ¥"><a href="#å…¬ä¼—å·é“¾æ¥" class="headerlink" title="å…¬ä¼—å·é“¾æ¥"></a>å…¬ä¼—å·é“¾æ¥</h3><p><a href="https://mp.weixin.qq.com/s/rIYEBCV04xL1XMky57EtPA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/rIYEBCV04xL1XMky57EtPA</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/11/18/search-file-and-zip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/11/18/search-file-and-zip/" itemprop="url">shell å’Œ windows æŸ¥æ‰¾æ–‡ä»¶å¹¶ä¸”å‹ç¼©</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-11-18T23:11:51+08:00">
                2021-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  87 å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  1 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>How to search files and zipï¼ˆLinux or Windowsï¼‰</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./  -name '*.tar.zf' -exec zip filname.zip &#123;&#125; +</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">Get-ChildItem</span> -Path D:\test -Recurse -Include *.tar.gz| <span class="built_in">Compress-Archive</span> -Verbose -DestinationPath D:\test.zip -Force </span><br><span class="line"></span><br><span class="line"><span class="variable">$filepath</span>=<span class="string">"D:\test"</span> </span><br><span class="line"><span class="variable">$zippath</span>=<span class="string">"D:\test.zip"</span> </span><br><span class="line"><span class="built_in">Get-ChildItem</span> -Path <span class="variable">$filepath</span> -Recurse -Include *.tar.gz| <span class="built_in">Compress-Archive</span> -Verbose -DestinationPath <span class="variable">$zippath</span> -Force</span><br></pre></td></tr></table></figure>

<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://www.twblogs.net/a/5b7d44a32b71770a43de7828" target="_blank" rel="noopener">https://www.twblogs.net/a/5b7d44a32b71770a43de7828</a><br><a href="https://www.codegrepper.com/code-examples/shell/powershell+zip+multiple+files" target="_blank" rel="noopener">https://www.codegrepper.com/code-examples/shell/powershell+zip+multiple+files</a><br><a href="https://community.spiceworks.com/topic/2239060-search-for-files-and-zip" target="_blank" rel="noopener">https://community.spiceworks.com/topic/2239060-search-for-files-and-zip</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://nonewood.github.io/2021/11/07/513050-backtest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nonewood">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æœç®€å•å¤„æƒ³ å¾€è®¤çœŸå¤„è¡Œ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/11/07/513050-backtest/" itemprop="url">åŸºäºå¦ç±»æ•°æ®å¯¹ETFè¿›è¡Œå›æµ‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-11-07T17:38:10+08:00">
                2021-11-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  2.2k å­—
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  9 åˆ†é’Ÿ
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="åŸºæœ¬èƒŒæ™¯"><a href="#åŸºæœ¬èƒŒæ™¯" class="headerlink" title="åŸºæœ¬èƒŒæ™¯"></a>åŸºæœ¬èƒŒæ™¯</h2><p><a href="https://mp.weixin.qq.com/s/RFJM06EFiuBezAWLmfQMdg" target="_blank" rel="noopener">å½­åšç›˜å‰ç®€æŠ¥ï¼š7æœˆ14æ—¥</a></p>
<p>æ¯å¤©éƒ½ä¼šçœ‹è¿™ä¸ªå…¬ä¼—å·ï¼Œè€Œä¸”ä¼šåœ¨ç›˜å‰å‘ï¼Œå‘ç°å†…å®¹ä¸­æåˆ°çš„ä¸­æ¦‚è‚¡å’Œä¸­æ¦‚ETFçš„æ¶¨è·Œå…·æœ‰ä¸€å®šçš„ç›¸å…³æ€§ï¼Œæ—©å°±æ‰‹ç—’ç—’äº†æƒ³åšä¸€ä¸‹å›æµ‹çœ‹æ˜¯å¦çœŸå¾—å¦‚æ­¤ï¼Œäºæ˜¯ï¼ŒèŠ±äº†ä¸€æ•´å¤©æ—¶é—´â€¦ æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<h2 id="çˆ¬å–å…¬ä¼—å·æ–‡ç« "><a href="#çˆ¬å–å…¬ä¼—å·æ–‡ç« " class="headerlink" title="çˆ¬å–å…¬ä¼—å·æ–‡ç« "></a>çˆ¬å–å…¬ä¼—å·æ–‡ç« </h2><p>çˆ¬å–è¿‡ç¨‹ä¸­ä¸‰ä¸ªéº»çƒ¦çš„ç‚¹ï¼š<br>1ï¼‰å¯èƒ½ä¼šè¾“å…¥éªŒè¯ç ï¼›<br>2ï¼‰çˆ¬å–å‡ æ¬¡åï¼Œcookiesä¼šå¤±æ•ˆï¼›<br>3ï¼‰åˆ°æœ€åå³ä½¿æ‰‹åŠ¨æŸ¥è¯¢æƒ³è¦æŸ¥è¯¢çš„å…¬ä¼—å·ï¼Œä¹Ÿä¼šæŠ¥é”™ï¼Œè¿”å›äº†Noneï¼ˆä¸çŸ¥é“æ˜¯ä¸æ˜¯çˆ¬å–æ¬¡æ•°è¿‡å¤šçš„åŸå› ï¼‰ï¼Œä¸è¿‡å¼„åˆ°çš„æ•°æ®å·²ç»å¤Ÿæˆ‘ç”¨äº†ï¼ˆå†æ—©ï¼Œè¿™ä¸ªå…¬ä¼—å·è¿˜æ²¡æœ‰ä¸­æ¦‚è‚¡è¿™ä¸ªç‰ˆå—ï¼‰ï¼›</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,re</span><br><span class="line"> </span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver <span class="comment">#å¼•å…¥è‡ªåŠ¨åŒ–ç™»å½•æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> time,datetime <span class="comment">#æ—¶é—´æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests <span class="comment">#æŠ“å–ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By <span class="comment">#å¼•å…¥å®šä½å¯»æ‰¾æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys <span class="comment">#å¼•å…¥é”®ç›˜åŠ¨ä½œæ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains <span class="comment">#å¼•å…¥é¼ æ ‡è¡Œä¸ºæ¨¡å—</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¾®ä¿¡å…¬ä¼—å·è´¦å·</span></span><br><span class="line">user=<span class="string">""</span></span><br><span class="line"><span class="comment">#å…¬ä¼—å·å¯†ç </span></span><br><span class="line">password=<span class="string">""</span></span><br><span class="line"><span class="comment">#è®¾ç½®è¦çˆ¬å–çš„å…¬ä¼—å·åˆ—è¡¨</span></span><br><span class="line">gzlist=[<span class="string">'å½­åšç¯çƒè´¢ç»'</span>]</span><br><span class="line"><span class="comment">#ä¿å­˜çš„ç»“æœæ–‡ä»¶åœ°å€</span></span><br><span class="line">fileName=<span class="string">"articles.xls"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç™»å½•å¾®ä¿¡å…¬ä¼—å·ï¼Œè·å–ç™»å½•ä¹‹åçš„cookiesä¿¡æ¯ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡æœ¬ä¸­</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">weChat_login</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment">#å®šä¹‰ä¸€ä¸ªç©ºçš„å­—å…¸ï¼Œå­˜æ”¾cookieså†…å®¹</span></span><br><span class="line">    post=&#123;&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#ç”¨webdriverå¯åŠ¨è°·æ­Œæµè§ˆå™¨</span></span><br><span class="line">    print(<span class="string">"å¯åŠ¨æµè§ˆå™¨ï¼Œæ‰“å¼€å¾®ä¿¡å…¬ä¼—å·ç™»å½•ç•Œé¢"</span>)</span><br><span class="line">    <span class="comment">#CHROME_DRIVER=r"F:\\chromedriver.exe"</span></span><br><span class="line">    op = webdriver.ChromeOptions()</span><br><span class="line">    <span class="comment"># macos ä½¿ç”¨çš„è¯­å¥</span></span><br><span class="line">    driver = webdriver.Chrome(options=op)</span><br><span class="line">    <span class="comment">#driver = webdriver.Chrome(executable_path=CHROME_DRIVER)</span></span><br><span class="line">    <span class="comment">#driver.set_window_position(0,0)</span></span><br><span class="line">    <span class="comment">#driver.maximize_window()</span></span><br><span class="line">    <span class="comment">#æ‰“å¼€å¾®ä¿¡å…¬ä¼—å·ç™»å½•é¡µé¢</span></span><br><span class="line">    driver.get(<span class="string">'https://mp.weixin.qq.com/'</span>)</span><br><span class="line">    <span class="comment">#ç­‰å¾…5ç§’é’Ÿ</span></span><br><span class="line">    time.sleep(<span class="number">10</span>)</span><br><span class="line">    print(<span class="string">"æ­£åœ¨è¾“å…¥å¾®ä¿¡å…¬ä¼—å·ç™»å½•è´¦å·å’Œå¯†ç ......"</span>)</span><br><span class="line">    driver.find_element_by_xpath(<span class="string">"./*//a[@class='login__type__container__select-type']"</span>).click() <span class="comment">#é¼ æ ‡æ”¾åˆ°ä½¿ç”¨è´¦å·å¯†ç ç™»å½•é”®ä¸Š</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment">#æ¸…ç©ºè´¦å·æ¡†ä¸­çš„å†…å®¹</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[1]/div[1]/div/span/input'</span>).clear()</span><br><span class="line">    <span class="comment">#è‡ªåŠ¨å¡«å…¥ç™»å½•ç”¨æˆ·å</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[1]/div[1]/div/span/input'</span>).send_keys(user)</span><br><span class="line">    <span class="comment">#æ¸…ç©ºå¯†ç æ¡†ä¸­çš„å†…å®¹</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[1]/div[2]/div/span/input'</span>).clear()</span><br><span class="line">    <span class="comment">#è‡ªåŠ¨å¡«å…¥ç™»å½•å¯†ç </span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[1]/div[2]/div/span/input'</span>).send_keys(password)</span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line">    <span class="comment">#è‡ªåŠ¨ç‚¹å‡»ç™»å½•æŒ‰é’®è¿›è¡Œç™»å½•</span></span><br><span class="line">    driver.find_element_by_xpath(<span class="string">'//*[@id="header"]/div[2]/div/div/div[1]/form/div[4]/a'</span>).click()</span><br><span class="line">    <span class="comment"># æ‹¿æ‰‹æœºæ‰«äºŒç»´ç ï¼</span></span><br><span class="line">    print(<span class="string">"è¯·æ‹¿æ‰‹æœºæ‰«ç äºŒç»´ç ç™»å½•å…¬ä¼—å·"</span>)</span><br><span class="line">    time.sleep(<span class="number">20</span>)</span><br><span class="line">    print(<span class="string">"ç™»å½•æˆåŠŸ"</span>)</span><br><span class="line">    <span class="comment">#é‡æ–°è½½å…¥å…¬ä¼—å·ç™»å½•é¡µï¼Œç™»å½•ä¹‹åä¼šæ˜¾ç¤ºå…¬ä¼—å·åå°é¦–é¡µï¼Œä»è¿™ä¸ªè¿”å›å†…å®¹ä¸­è·å–cookiesä¿¡æ¯</span></span><br><span class="line">    driver.get(<span class="string">'https://mp.weixin.qq.com/'</span>)</span><br><span class="line">    <span class="comment">#è·å–cookies</span></span><br><span class="line">    cookie_items = driver.get_cookies()</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#è·å–åˆ°çš„cookiesæ˜¯åˆ—è¡¨å½¢å¼ï¼Œå°†cookiesè½¬æˆjsonå½¢å¼å¹¶å­˜å…¥æœ¬åœ°åä¸ºcookieçš„æ–‡æœ¬ä¸­</span></span><br><span class="line">    <span class="keyword">for</span> cookie_item <span class="keyword">in</span> cookie_items:</span><br><span class="line">        post[cookie_item[<span class="string">'name'</span>]] = cookie_item[<span class="string">'value'</span>]</span><br><span class="line">    cookie_str = json.dumps(post)</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'cookie.txt'</span>, <span class="string">'w+'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(cookie_str)</span><br><span class="line">    print(<span class="string">"cookiesä¿¡æ¯å·²ä¿å­˜åˆ°æœ¬åœ°"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_content</span><span class="params">(query)</span>:</span></span><br><span class="line">    <span class="comment">#queryä¸ºè¦çˆ¬å–çš„å…¬ä¼—å·åç§°</span></span><br><span class="line">    <span class="comment">#å…¬ä¼—å·ä¸»é¡µ</span></span><br><span class="line">    url = <span class="string">'https://mp.weixin.qq.com/'</span></span><br><span class="line">    <span class="comment">#è®¾ç½®headers</span></span><br><span class="line">    header = &#123;</span><br><span class="line">        <span class="string">"HOST"</span>: <span class="string">"mp.weixin.qq.com"</span>,</span><br><span class="line">        <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0"</span></span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#è¯»å–ä¸Šä¸€æ­¥è·å–åˆ°çš„cookies</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'cookie.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        cookie = f.read()</span><br><span class="line">    cookies = json.loads(cookie)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#ç™»å½•ä¹‹åçš„å¾®ä¿¡å…¬ä¼—å·é¦–é¡µurlå˜åŒ–ä¸ºï¼šhttps://mp.weixin.qq.com/cgi-bin/home?t=home/index&amp;lang=zh_CN&amp;token=1849751598ï¼Œä»è¿™é‡Œè·å–tokenä¿¡æ¯</span></span><br><span class="line">    response = requests.get(url=url, cookies=cookies)</span><br><span class="line">    token = re.findall(<span class="string">r'token=(\d+)'</span>, str(response.url))[<span class="number">0</span>]</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#æœç´¢å¾®ä¿¡å…¬ä¼—å·çš„æ¥å£åœ°å€</span></span><br><span class="line">    search_url = <span class="string">'https://mp.weixin.qq.com/cgi-bin/searchbiz?'</span></span><br><span class="line">    <span class="comment">#æœç´¢å¾®ä¿¡å…¬ä¼—å·æ¥å£éœ€è¦ä¼ å…¥çš„å‚æ•°ï¼Œæœ‰ä¸‰ä¸ªå˜é‡ï¼šå¾®ä¿¡å…¬ä¼—å·tokenã€éšæœºæ•°randomã€æœç´¢çš„å¾®ä¿¡å…¬ä¼—å·åå­—</span></span><br><span class="line">    query_id = &#123;</span><br><span class="line">        <span class="string">'action'</span>: <span class="string">'search_biz'</span>,</span><br><span class="line">        <span class="string">'token'</span> : token,</span><br><span class="line">        <span class="string">'lang'</span>: <span class="string">'zh_CN'</span>,</span><br><span class="line">        <span class="string">'f'</span>: <span class="string">'json'</span>,</span><br><span class="line">        <span class="string">'ajax'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'random'</span>: random.random(),</span><br><span class="line">        <span class="string">'query'</span>: query,</span><br><span class="line">        <span class="string">'begin'</span>: <span class="string">'0'</span>,</span><br><span class="line">        <span class="string">'count'</span>: <span class="string">'5'</span></span><br><span class="line">        &#125; </span><br><span class="line">    <span class="comment">#æ‰“å¼€æœç´¢å¾®ä¿¡å…¬ä¼—å·æ¥å£åœ°å€ï¼Œéœ€è¦ä¼ å…¥ç›¸å…³å‚æ•°ä¿¡æ¯å¦‚ï¼šcookiesã€paramsã€headers</span></span><br><span class="line">    search_response = requests.get(search_url, cookies=cookies, headers=header, params=query_id)</span><br><span class="line">    <span class="comment">#print(search_response)</span></span><br><span class="line">    <span class="comment">#å–æœç´¢ç»“æœä¸­çš„ç¬¬ä¸€ä¸ªå…¬ä¼—å·</span></span><br><span class="line">    lists = search_response.json().get(<span class="string">'list'</span>)[<span class="number">0</span>]</span><br><span class="line">    print(lists)</span><br><span class="line">    <span class="comment">#è·å–è¿™ä¸ªå…¬ä¼—å·çš„fakeidï¼Œåé¢çˆ¬å–å…¬ä¼—å·æ–‡ç« éœ€è¦æ­¤å­—æ®µ</span></span><br><span class="line">    fakeid = lists.get(<span class="string">'fakeid'</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#å¾®ä¿¡å…¬ä¼—å·æ–‡ç« æ¥å£åœ°å€</span></span><br><span class="line">    appmsg_url = <span class="string">'https://mp.weixin.qq.com/cgi-bin/appmsg?'</span></span><br><span class="line">    <span class="comment">#æœç´¢æ–‡ç« éœ€è¦ä¼ å…¥å‡ ä¸ªå‚æ•°ï¼šç™»å½•çš„å…¬ä¼—å·tokenã€è¦çˆ¬å–æ–‡ç« çš„å…¬ä¼—å·fakeidã€éšæœºæ•°random</span></span><br><span class="line">    query_id_data = &#123;</span><br><span class="line">        <span class="string">'token'</span>: token,</span><br><span class="line">        <span class="string">'lang'</span>: <span class="string">'zh_CN'</span>,</span><br><span class="line">        <span class="string">'f'</span>: <span class="string">'json'</span>,</span><br><span class="line">        <span class="string">'ajax'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'random'</span>: random.random(),</span><br><span class="line">        <span class="string">'action'</span>: <span class="string">'list_ex'</span>,</span><br><span class="line">        <span class="string">'begin'</span>: <span class="string">'0'</span>,<span class="comment">#ä¸åŒé¡µï¼Œæ­¤å‚æ•°å˜åŒ–ï¼Œå˜åŒ–è§„åˆ™ä¸ºæ¯é¡µåŠ 5</span></span><br><span class="line">        <span class="string">'count'</span>: <span class="string">'5'</span>,</span><br><span class="line">        <span class="string">'query'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'fakeid'</span>: fakeid,</span><br><span class="line">        <span class="string">'type'</span>: <span class="string">'9'</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">#æ‰“å¼€æœç´¢çš„å¾®ä¿¡å…¬ä¼—å·æ–‡ç« åˆ—è¡¨é¡µ</span></span><br><span class="line">    appmsg_response = requests.get(appmsg_url, cookies=cookies, headers=header, params=query_id_data)</span><br><span class="line">    print(appmsg_response.json())</span><br><span class="line">    <span class="comment">#è·å–æ–‡ç« æ€»æ•°</span></span><br><span class="line">    max_num = appmsg_response.json().get(<span class="string">'app_msg_cnt'</span>)</span><br><span class="line">    print(max_num)</span><br><span class="line">    <span class="comment">#print(max_num)</span></span><br><span class="line">    <span class="comment">#æ¯é¡µè‡³å°‘æœ‰5æ¡ï¼Œè·å–æ–‡ç« æ€»çš„é¡µæ•°ï¼Œçˆ¬å–æ—¶éœ€è¦åˆ†é¡µçˆ¬</span></span><br><span class="line">    num = int(int(max_num) / <span class="number">5</span>)</span><br><span class="line">    <span class="comment">#print(num)</span></span><br><span class="line">    <span class="comment">#èµ·å§‹é¡µbeginå‚æ•°ï¼Œå¾€åæ¯é¡µåŠ 5</span></span><br><span class="line">    begin = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> num + <span class="number">1</span> &gt; <span class="number">0</span> :</span><br><span class="line">        query_id_data = &#123;</span><br><span class="line">            <span class="string">'token'</span>: token,</span><br><span class="line">            <span class="string">'lang'</span>: <span class="string">'zh_CN'</span>,</span><br><span class="line">            <span class="string">'f'</span>: <span class="string">'json'</span>,</span><br><span class="line">            <span class="string">'ajax'</span>: <span class="string">'1'</span>,</span><br><span class="line">            <span class="string">'random'</span>: random.random(),</span><br><span class="line">            <span class="string">'action'</span>: <span class="string">'list_ex'</span>,</span><br><span class="line">            <span class="string">'begin'</span>: <span class="string">'&#123;&#125;'</span>.format(str(begin)),</span><br><span class="line">            <span class="string">'count'</span>: <span class="string">'5'</span>,</span><br><span class="line">            <span class="string">'query'</span>: <span class="string">''</span>,</span><br><span class="line">            <span class="string">'fakeid'</span>: fakeid,</span><br><span class="line">            <span class="string">'type'</span>: <span class="string">'9'</span></span><br><span class="line">            &#125;</span><br><span class="line">        print(<span class="string">'æ­£åœ¨ç¿»é¡µï¼š--------------'</span>,begin)</span><br><span class="line"> </span><br><span class="line">        <span class="comment">#è·å–æ¯ä¸€é¡µæ–‡ç« çš„æ ‡é¢˜å’Œé“¾æ¥åœ°å€ï¼Œå¹¶å†™å…¥æœ¬åœ°æ–‡æœ¬ä¸­</span></span><br><span class="line">        query_fakeid_response = requests.get(appmsg_url, cookies=cookies, headers=header, params=query_id_data)</span><br><span class="line">        print(query_fakeid_response)</span><br><span class="line">        fakeid_list = query_fakeid_response.json().get(<span class="string">'app_msg_list'</span>)</span><br><span class="line">        <span class="comment">#print(fakeid_list)</span></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> fakeid_list:</span><br><span class="line">            content_link=item.get(<span class="string">'link'</span>) <span class="comment">#é“¾æ¥</span></span><br><span class="line">            content_title=item.get(<span class="string">'title'</span>) <span class="comment">#é¢˜ç›®</span></span><br><span class="line">			   <span class="comment"># æˆ‘åªéœ€è¦ç›˜å‰ç®€æŠ¥</span></span><br><span class="line">            <span class="keyword">if</span> re.search(<span class="string">'å½­åšç›˜å‰ç®€æŠ¥'</span>, content_title):</span><br><span class="line">                print(content_title)</span><br><span class="line">                update_time=time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>, time.localtime(item.get(<span class="string">'update_time'</span>))) <span class="comment">#å‘å¸ƒæ—¶é—´</span></span><br><span class="line">                <span class="comment">#print(content_title+"\t"+content_link+"\t""+update_time+"\n"))</span></span><br><span class="line">                <span class="keyword">with</span> open(fileName,<span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> fh:</span><br><span class="line">                    fh.write(content_title+<span class="string">"\t"</span>+content_link+<span class="string">"\t"</span>+update_time+<span class="string">"\n"</span>)</span><br><span class="line">        num -= <span class="number">1</span></span><br><span class="line">        begin = int(begin)</span><br><span class="line">        begin+=<span class="number">5</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment">#ç™»å½•å¾®ä¿¡å…¬ä¼—å·ï¼Œè·å–ç™»å½•ä¹‹åçš„cookiesä¿¡æ¯ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡æœ¬ä¸­</span></span><br><span class="line">        weChat_login()</span><br><span class="line">        <span class="comment">#ç™»å½•ä¹‹åï¼Œé€šè¿‡å¾®ä¿¡å…¬ä¼—å·åå°æä¾›çš„å¾®ä¿¡å…¬ä¼—å·æ–‡ç« æ¥å£çˆ¬å–æ–‡ç« </span></span><br><span class="line">        <span class="keyword">for</span> query <span class="keyword">in</span> gzlist:</span><br><span class="line">            <span class="comment">#çˆ¬å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ï¼Œå¹¶å­˜åœ¨æœ¬åœ°æ–‡æœ¬ä¸­</span></span><br><span class="line">            print(<span class="string">"å¼€å§‹çˆ¬å–å…¬ä¼—å·ï¼š"</span>+query)</span><br><span class="line">            get_content(query)</span><br><span class="line">            print(<span class="string">"çˆ¬å–å®Œæˆ"</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(str(e))</span><br></pre></td></tr></table></figure>

<h3 id="æœ¬éƒ¨åˆ†å‚è€ƒé“¾æ¥"><a href="#æœ¬éƒ¨åˆ†å‚è€ƒé“¾æ¥" class="headerlink" title="æœ¬éƒ¨åˆ†å‚è€ƒé“¾æ¥"></a>æœ¬éƒ¨åˆ†å‚è€ƒé“¾æ¥</h3><p><a href="https://blog.nowcoder.net/n/a1920b33dae144bfb56f17b48ed90e6a" target="_blank" rel="noopener">pythonçˆ¬å–å…¬ä¼—å·å†å²æ–‡ç« _ç‰›å®¢åšå®¢</a><br><a href="https://blog.csdn.net/weixin_39688870/article/details/111645741" target="_blank" rel="noopener">pythonçˆ¬å–å…¬ä¼—å·é˜…è¯»é‡_Pythonçˆ¬å–å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ä»¥åŠåœ¨çœ‹é˜…è¯»æ•°_weixin_39688870çš„åšå®¢-CSDNåšå®¢</a></p>
<h2 id="å¤„ç†æ•°æ®"><a href="#å¤„ç†æ•°æ®" class="headerlink" title="å¤„ç†æ•°æ®"></a>å¤„ç†æ•°æ®</h2><p>éœ€è¦çš„æ–‡ä»¶ï¼š<br>1ï¼‰ä¸Šæ–‡çˆ¬åˆ°çš„ç»“æœæ–‡ä»¶ï¼›<br>2ï¼‰ä¸­æ¦‚ETF 513050çš„è¡Œæƒ…ä¿¡æ¯ï¼Œç”±é€šè¾¾ä¿¡å¯¼å‡ºï¼›</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dt = pd.read_table(<span class="string">'articles.csv'</span>, header = <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‰éœ€å¤„ç†æ•°æ®</span></span><br><span class="line">dt = dt.drop_duplicates()</span><br><span class="line">dt = dt[[ <span class="literal">True</span> <span class="keyword">if</span> re.search(<span class="string">'å½­åšç›˜å‰ç®€æŠ¥'</span>, x) <span class="keyword">else</span> <span class="literal">False</span> <span class="keyword">for</span> x <span class="keyword">in</span> dt[<span class="number">0</span>]]]</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(columns = [<span class="string">'date'</span>, <span class="string">'change'</span>])</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(<span class="number">0</span>, dt.shape[<span class="number">0</span>]):    </span><br><span class="line">    <span class="comment">#print(dt[1])</span></span><br><span class="line">    url = list(dt[<span class="number">1</span>])[index]</span><br><span class="line">    date = list(dt[<span class="number">2</span>])[index][:<span class="number">10</span>]</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    soup = BeautifulSoup(res.content, <span class="string">"html.parser"</span>)</span><br><span class="line">    content = soup.get_text()</span><br><span class="line">    <span class="comment">#match = re.search('(ä¸­æ¦‚è‚¡ï¼š.*)ç¾å›½å€ºå¸‚', content)</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œæˆ‘åªä½¿ç”¨äº†é‡‘é¾™ä¸­å›½æŒ‡æ•°ä½œä¸ºæµ‹è¯•</span></span><br><span class="line">    match1 = re.search(<span class="string">'é‡‘é¾™ä¸­å›½æŒ‡æ•°ä¸Šæ¶¨(\d\.\d?)%'</span>, content)</span><br><span class="line">    match2 = re.search(<span class="string">'é‡‘é¾™ä¸­å›½æŒ‡æ•°ä¸‹è·Œ(\d\.\d?)%'</span>, content)</span><br><span class="line">    row = dict()</span><br><span class="line">    change = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> match1:</span><br><span class="line">        change = float(match1.group(<span class="number">1</span>))</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> match2:</span><br><span class="line">        change = <span class="number">0</span> - float(match2.group(<span class="number">1</span>))</span><br><span class="line">        </span><br><span class="line">    row = &#123;<span class="string">'date'</span>: date, <span class="string">'change'</span>: change&#125;</span><br><span class="line">    df = df.append(row, ignore_index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">df[<span class="string">'date'</span>] = pd.to_datetime(df[<span class="string">'date'</span>])</span><br><span class="line">df  = df.set_index(<span class="string">'date'</span>)</span><br><span class="line">df = df[df.change != <span class="number">0</span>]</span><br><span class="line">df = df.drop_duplicates()</span><br><span class="line"></span><br><span class="line"><span class="comment"># etf è¡Œæƒ…</span></span><br><span class="line">price = pd.read_table(<span class="string">'513050.xls'</span>)</span><br><span class="line">new_column = [x.strip() <span class="keyword">for</span> x <span class="keyword">in</span> price.columns]</span><br><span class="line">price.columns = new_column</span><br><span class="line">price[<span class="string">'date'</span>] = pd.to_datetime(price[<span class="string">'æ—¶é—´'</span>], format=<span class="string">'%Y/%m/%d'</span>)</span><br><span class="line"><span class="comment"># è®¡ç®—æ¯æ—¥å¼€ç›˜ä¹°å…¥ï¼Œæ”¶ç›˜ä»·å–å‡ºçš„è¯ï¼Œæ”¶ç›Šç‡å¤šå°‘</span></span><br><span class="line">price[<span class="string">'etf_change'</span>] = (price[<span class="string">'æ”¶ç›˜'</span>] - price[<span class="string">'å¼€ç›˜'</span>])/price[<span class="string">'å¼€ç›˜'</span>]*<span class="number">100</span></span><br><span class="line">price = price[[<span class="string">'date'</span>, <span class="string">'å¼€ç›˜'</span>, <span class="string">'æ”¶ç›˜'</span>, <span class="string">'etf_change'</span>]]</span><br><span class="line">price = price.set_index(<span class="string">'date'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶æ•°æ®ï¼Œçœ‹ä¸‹ä¿¡åˆå’Œåœºå†…çš„etfæ—¥æ¶¨è·Œå¹…æ˜¯å¦æœ‰å…³ç³»ï¼Ÿ</span></span><br><span class="line"><span class="comment"># è¿™è¾¹çœ‹æ•ˆæœä¸å¤ªå¥½ï¼Œå¯èƒ½å’Œæœ‰ç¼ºå¤±å€¼ç›¸å…³</span></span><br><span class="line">dm = pd.concat([price, df], join = <span class="string">'inner'</span>, axis = <span class="number">1</span>)</span><br><span class="line">fig = plt.figure(figsize = (<span class="number">20</span>,<span class="number">8</span>))</span><br><span class="line">dm.change.plot(color = <span class="string">'blue'</span>,kind = <span class="string">'bar'</span>, alpha = <span class="number">0.2</span>)</span><br><span class="line">dm.etf_change.plot(color = <span class="string">'red'</span>, kind = <span class="string">'bar'</span>, alpha = <span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºä¿¡å·æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># ä¿¡å·æ—¥æœŸå¾€å‰æ¨ä¸€å¤©</span></span><br><span class="line">dm[<span class="string">'date'</span>] = [x - np.timedelta64(<span class="number">1</span>, <span class="string">'D'</span>) <span class="keyword">for</span> x <span class="keyword">in</span> dm.index]</span><br><span class="line">dm = dm.set_index(<span class="string">'date'</span>)</span><br><span class="line">dm[<span class="string">'instrument'</span>] = <span class="string">'510500.HOF'</span></span><br><span class="line">dm.to_csv(<span class="string">'signal.csv'</span>)</span><br></pre></td></tr></table></figure>

<p>æ¶¨è·Œå¹…æ˜¯å¦ä¸€è‡´ï¼Œç”»äº†ä¸ªå›¾ï¼Œä¸æ˜¯å¾ˆä¸€è‡´â€¦<br>ä¸è¿‡ï¼Œå¤§è¿‡å¹´çš„ï¼Œæ¥éƒ½æ¥äº†â€¦ å°±å†å›æµ‹ä¸€æŠŠå§â€¦.</p>
<h2 id="å›æµ‹å¹³å°å›æµ‹"><a href="#å›æµ‹å¹³å°å›æµ‹" class="headerlink" title="å›æµ‹å¹³å°å›æµ‹"></a>å›æµ‹å¹³å°å›æµ‹</h2><p>ä½¿ç”¨çš„å¹³å°æ˜¯bigquantï¼Œäº¤æ˜“é€»è¾‘å¾ˆç®€å•ï¼Œè¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼š<br>1ï¼‰å½“ä¿¡å·å¤§äº1æ—¶ï¼Œä¹°å…¥ï¼›<br>2ï¼‰å¦‚æœä¹°å…¥åç¬¬äºŒå¤©æœ‰ä¿¡å·ï¼Œä¸”ä¿¡å·å°äº0æ‰å–å‡ºï¼Œå¦åˆ™ä¸å–å‡ºï¼› å¦‚æœæ²¡æœ‰ ä¿¡å·ï¼Œåˆ™ç›´æ¥å–å‡ºï¼›</p>
<p>å›æµ‹æœ‰ 4.25% çš„æ”¶ç›Šç‡ï¼Œè·‘èµ¢åŸºå‡† 7ä¸ªç‚¹ +.+</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶å®æˆ‘è§‰å¾—å…¬ä¼—å·çš„èƒ½æºå’Œæ²¹æ°”ä¹Ÿå¯ä»¥è¯•è¯•ï¼Œä¸è¿‡è§‚å¯Ÿæ¥çœ‹åå®æ²¹æ°”ä¸€èˆ¬å¼€ç›˜ä»·å°±æ˜¯æœ€é«˜ç‚¹ï¼Œä¸ç»™ä¹°å…¥çš„æœºä¼šâ€¦. åè¾¹å†è¯•è¯•ï¼›<br>ç®—æ˜¯å¯¹è‡ªå·±è§‚å¯Ÿæ‰€å¾—å¦ç±»æ•°æ®çš„ä¸€ä¸ªå°å°è¯•å§ï¼Œæœ‰å¥½å¤šä¸œè¥¿è¦å­¦ä¹ å•Šå•Šå•Šå•Šå•Šå•Šå•Šâ€¦..</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ä¾§è¾¹å¹¿å‘Š -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7093029654692281" data-ad-slot="4703719462" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Nonewood</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">84</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">50</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- ä¾§è¾¹å¹¿å‘Š -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7093029654692281" data-ad-slot="4703719462" data-ad-format="auto" data-full-width-responsive="true"></ins>
     <script>
     (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nonewood</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">139.7k</span>
  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

  

  <script async src="/js/src/fireworks.js"></script>



 
<script>
  var OriginTitile = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function() {
    if (document.hidden) {
      document.title = "(ã¤ã‚§âŠ‚)æˆ‘è—å¥½äº†å“¦~" + OriginTitile;
      clearTimeout(titleTime);
    } else {
      document.title = "(*Â´âˆ‡ï½€*) è¢«ä½ å‘ç°å•¦~" + OriginTitile;
      titleTime = setTimeout(function() {
        document.title = OriginTitile;
      }, 2000);
    }
  });
</script>


 
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
<script>
  function timer() {
    var ages = moment.preciseDiff(moment(),moment(20190801,"YYYYMMDD"));
    ages = ages.replace(/years?/, "å¹´");
    ages = ages.replace(/months?/, "æœˆ");
    ages = ages.replace(/days?/, "å¤©");
    ages = ages.replace(/hours?/, "å°æ—¶");
    ages = ages.replace(/minutes?/, "åˆ†");
    ages = ages.replace(/seconds?/, "ç§’ğ“ƒ—ğ“ƒµğ“†‰ğ“‡¼ğ“†¡");
    ages = ages.replace(/\d+/g, '<span style="color:">$&</span>');
    div.innerHTML = `ğ“ƒ ğ“ƒ°ğ“ƒ±ğ“ƒ²ğ“ƒŸ ${ages}`;
  }
  var div = document.createElement("div");
  //æ’å…¥åˆ°copyrightä¹‹å
  var copyright = document.querySelector(".copyright");
  document.querySelector(".footer-inner").insertBefore(div, copyright.nextSibling);
  timer();
  setInterval("timer()",1000)
</script>


</body>
</html>
